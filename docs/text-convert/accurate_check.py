#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import re

# åªæª¢æŸ¥çœŸæ­£çš„ç°¡é«”å­—ï¼ˆä¸åŒ…æ‹¬ç¹ç°¡é€šç”¨å­—ï¼‰
truly_simplified = {
    # åƒ…ç°¡é«”çš„å­—
    'ä¸º': 'ç‚º', 'ä¹¦': 'æ›¸', 'ä»¬': 'å€‘', 'ä¼š': 'æœƒ', 'è®©': 'è®“',
    'è®¤': 'èª', 'è®°': 'è¨˜', 'è®¡': 'è¨ˆ', 'è®®': 'è­°', 'è®¯': 'è¨Š',
    'è®¾': 'è¨­', 'è®¿': 'è¨ª', 'è¯': 'è­‰', 'è¯„': 'è©•', 'è¯†': 'è­˜',
    'è¯': 'è©', 'è¯‘': 'è­¯', 'è¯•': 'è©¦', 'è¯¥': 'è©²', 'è¯¦': 'è©³',
    'è¯­': 'èª', 'è¯´': 'èªª', 'è¯·': 'è«‹', 'è¯¸': 'è«¸', 'è¯»': 'è®€',
    'è°ƒ': 'èª¿', 'è°': 'èª°', 'è¯¾': 'èª²', 'è°ˆ': 'è«‡', 'è°“': 'è¬‚',
    'è¯š': 'èª ', 'è°‹': 'è¬€', 'è°': 'è¬Š', 'è°œ': 'è¬', 'è°¢': 'è¬',
    'è°¨': 'è¬¹', 'è°±': 'è­œ', 'è´': 'è²', 'è´¢': 'è²¡', 'è´£': 'è²¬',
    'è´¤': 'è³¢', 'è´¥': 'æ•—', 'è´§': 'è²¨', 'è´¨': 'è³ª', 'è´©': 'è²©',
    'è´ª': 'è²ª', 'è´­': 'è³¼', 'è´¯': 'è²«', 'è´±': 'è³¤', 'è´´': 'è²¼',
    'è´µ': 'è²´', 'è´¹': 'è²»', 'è´º': 'è³€', 'è´¸': 'è²¿', 'èµ„': 'è³‡',
    'èµ': 'è³ƒ', 'èµ‚': 'è³‚', 'èµƒ': 'è´“', 'èµ‹': 'è³¦', 'èµŒ': 'è³­',
    'èµ': 'è´–', 'èµ': 'è³', 'èµ': 'è³œ', 'èµ”': 'è³ ', 'èµ–': 'è³´',
    'èµš': 'è³º', 'èµ›': 'è³½', 'èµ': 'è®š', 'èµ ': 'è´ˆ', 'èµ¢': 'è´',
    'è·µ': 'è¸', 'è¸ª': 'è¹¤', 'èº': 'èº', 'èº¯': 'è»€', 'è½¦': 'è»Š',
    'è½¨': 'è»Œ', 'è½©': 'è»’', 'è½¬': 'è½‰', 'è½®': 'è¼ª', 'è½¯': 'è»Ÿ',
    'è½°': 'è½Ÿ', 'è½´': 'è»¸', 'è½»': 'è¼•', 'è¾ƒ': 'è¼ƒ', 'è¾…': 'è¼”',
    'è¾†': 'è¼›', 'è¾ˆ': 'è¼©', 'è¾‰': 'è¼', 'è¾Š': 'è¼¥', 'è¾': 'è¼»',
    'è¾“': 'è¼¸', 'è¾–': 'è½„', 'è¾—': 'è¼¾', 'è¾˜': 'è½†', 'è¾¹': 'é‚Š',
    'è¾¾': 'é”', 'è¿': 'é·', 'è¿‡': 'é', 'è¿ˆ': 'é‚', 'è¿': 'é‹',
    'è¿˜': 'é‚„', 'è¿™': 'é€™', 'è¿›': 'é€²', 'è¿œ': 'é ', 'è¿': 'é•',
    'è¿': 'é€£', 'è¿Ÿ': 'é²', 'è¿¹': 'è·¡', 'é€‚': 'é©', 'é€‰': 'é¸',
    'é€Š': 'éœ', 'é€’': 'é', 'é€»': 'é‚', 'é—': 'éº', 'é‚®': 'éƒµ',
    'é‚»': 'é„°', 'éƒ‘': 'é„­', 'é‡Š': 'é‡‹', 'é’‰': 'é‡˜', 'é’ˆ': 'é‡',
    'é’“': 'é‡£', 'é’Ÿ': 'é˜', 'é’¢': 'é‹¼', 'é’©': 'é‰¤', 'é’±': 'éŒ¢',
    'é’»': 'é‘½', 'é“': 'éµ', 'é“ƒ': 'éˆ´', 'é“…': 'é‰›', 'é“œ': 'éŠ…',
    'é“': 'é‹', 'é“¶': 'éŠ€', 'é“º': 'é‹ª', 'é“¾': 'éˆ', 'é”€': 'éŠ·',
    'é”': 'é–', 'é”…': 'é‹', 'é”‹': 'é‹’', 'é”': 'éŠ³', 'é”™': 'éŒ¯',
    'é”¡': 'éŒ«', 'é”£': 'é‘¼', 'é”¤': 'éš', 'é”¦': 'éŒ¦', 'é”®': 'éµ',
    'é”¯': 'é‹¸', 'é•‡': 'é®', 'é•œ': 'é¡', 'é•°': 'é®', 'é—­': 'é–‰',
    'é—®': 'å•', 'é—²': 'é–’', 'é—´': 'é–“', 'é—·': 'æ‚¶', 'é—¸': 'é–˜',
    'é—¹': 'é¬§', 'é—»': 'è', 'é˜…': 'é–±', 'é˜Ÿ': 'éšŠ', 'é˜¶': 'éš',
    'é˜»': 'é˜»', 'é˜¿': 'é˜¿', 'é™†': 'é™¸', 'é™ˆ': 'é™³', 'é™©': 'éšª',
    'é™…': 'éš›', 'éš': 'éš¨', 'éš': 'éš±', 'éš¾': 'é›£', 'é›‡': 'åƒ±',
    'é›¾': 'éœ§', 'é¡¶': 'é ‚', 'é¡·': 'é ƒ', 'é¡º': 'é †', 'é¡½': 'é ‘',
    'é¡¾': 'é¡§', 'é¡¿': 'é “', 'é¢': 'é ’', 'é¢‚': 'é Œ', 'é¢„': 'é ',
    'é¢†': 'é ˜', 'é¢ˆ': 'é ¸', 'é¢‘': 'é »', 'é¢—': 'é¡†', 'é¢˜': 'é¡Œ',
    'é¢': 'é¡', 'é¢œ': 'é¡', 'é¢¤': 'é¡«', 'é£': 'é¢¨', 'é£˜': 'é£„',
    'é¥­': 'é£¯', 'é¥®': 'é£²', 'é¥°': 'é£¾', 'é¥±': 'é£½', 'é¥²': 'é£¼',
    'é¥¼': 'é¤…', 'é¥¿': 'é¤“', 'é¦†': 'é¤¨', 'é¦ˆ': 'é¥‹', 'é©±': 'é©…',
    'é©¶': 'é§›', 'é©»': 'é§', 'é©¾': 'é§•', 'éª‚': 'ç½µ', 'éª„': 'é©•',
    'éªŒ': 'é©—', 'éª—': 'é¨™', 'éªš': 'é¨·', 'éª¤': 'é©Ÿ', 'é«“': 'é«“',
    'ä½“': 'é«”', 'é±¼': 'é­š', 'é²': 'é­¯', 'é²œ': 'é®®', 'é¸Ÿ': 'é³¥',
    'é¸¡': 'é›', 'é¸£': 'é³´', 'é¸­': 'é´¨', 'é¸¯': 'é´¦', 'é¸³': 'é´›',
    'é¸µ': 'é´•', 'é¹…': 'éµ', 'é¹Š': 'éµ²', 'é¹': 'éµ¬', 'é¹¤': 'é¶´',
    'é¹°': 'é·¹', 'é¹¿': 'é¹¿', 'éº¦': 'éº¥', 'éº»': 'éº»', 'é»„': 'é»ƒ',
    'é»˜': 'é»˜', 'é½': 'é½Š', 'é½¿': 'é½’', 'é¾„': 'é½¡', 'é¾™': 'é¾',
    'é¾Ÿ': 'é¾œ',
}

def check_file(filename):
    """æª¢æŸ¥æ–‡ä»¶ä¸­çš„ç°¡é«”å­—"""
    print(f"\nğŸ“„ æª¢æŸ¥æ–‡ä»¶: {filename}")
    print("=" * 70)
    
    with open(filename, 'r', encoding='utf-8') as f:
        lines = f.readlines()
    
    issues = []
    for line_num, line in enumerate(lines, 1):
        # è·³éç¨‹å¼ç¢¼å€å¡Š
        if line.strip().startswith('```') or line.strip().startswith('#'):
            continue
        
        for simp_char, trad_char in truly_simplified.items():
            if simp_char in line:
                issues.append({
                    'line': line_num,
                    'simp': simp_char,
                    'trad': trad_char,
                    'content': line.strip()
                })
    
    if not issues:
        print("âœ“ æ²’æœ‰ç™¼ç¾ç°¡é«”å­—ï¼")
    else:
        print(f"âš ï¸  ç™¼ç¾ {len(issues)} è™•ç°¡é«”å­—:\n")
        for i, issue in enumerate(issues[:15], 1):  # é¡¯ç¤ºå‰15å€‹
            print(f"{i}. ç¬¬ {issue['line']:4d} è¡Œ: '{issue['simp']}' æ‡‰ç‚º '{issue['trad']}'")
            print(f"   å…§å®¹: {issue['content'][:70]}")
            print()
        
        if len(issues) > 15:
            print(f"... é‚„æœ‰ {len(issues) - 15} è™•\n")
    
    return len(issues)

def main():
    files = [
        '01-django-basics-for-nodejs-developers.md',
        '02-project-structure-and-planning.md',
        '03-api-implementation-guide.md',
    ]
    
    print("=" * 70)
    print("Django REST Framework æ–‡ä»¶ç¹é«”ä¸­æ–‡é©—è­‰")
    print("=" * 70)
    
    total = 0
    for f in files:
        total += check_file(f)
    
    print("\n" + "=" * 70)
    if total == 0:
        print("âœ… é©—è­‰é€šéï¼æ‰€æœ‰æ–‡ä»¶å·²å®Œæ•´è½‰æ›ç‚ºç¹é«”ä¸­æ–‡ã€‚")
    else:
        print(f"âŒ å…±ç™¼ç¾ {total} è™•ç°¡é«”å­—éœ€è¦ä¿®æ­£ã€‚")
    print("=" * 70)

if __name__ == '__main__':
    main()
