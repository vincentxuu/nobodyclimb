#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import re
import sys

# 最完整的繁簡轉換表
final_replacements = {
    # 程式碼註解中的簡體字
    '# 驱动': '# 驅動程式',
    '# 过滤': '# 過濾',
    '# 云存储': '# 雲端儲存',
    '# 自动生成': '# 自動生成',
    '# 服务器': '# 伺服器',
    '# 静态檔案服務': '# 靜態檔案服務',
    '# 缓存': '# 快取',
    '# 异步任务': '# 非同步任務',
    '# 代码格式化': '# 程式碼格式化',
    '# 代码檢查': '# 程式碼檢查',
    '# 交互式': '# 互動式',
    
    # Python 註解
    '擴充使用者模型': '擴充使用者模型',
    '# 基本資訊': '# 基本資訊',
    '个人簡介': '個人簡介',
    'blob': '大型二進位物件',
    '头像': '頭像',
    '# 攀岩相关': '# 攀岩相關',
    '常去岩馆': '常去岩館',
    '偏好路线類型': '偏好路線類型',
    '# 社交链接': '# 社交連結',
    '# 时间戳': '# 時間戳記',
    '建立时间': '建立時間',
    '更新时间': '更新時間',
    '# 软刪除': '# 軟刪除',
    
    # 專案術語
    '管理腳本': '管理腳本',
    '生產依賴': '生產環境依賴',
    '開發依賴': '開發環境依賴',
    '環境變數範例': '環境變數範例',
    '部署配置': '部署配置',
    '測試配置': '測試配置',
    '基礎配置': '基礎配置',
    '開發環境': '開發環境',
    '生產環境': '生產環境',
    '測試環境': '測試環境',
    '根路由': '根路由',
    '後台管理': '後台管理',
    '信号處理': '信號處理',
    '自定義过滤器': '自訂過濾器',
    '抽象基類別': '抽象基底類別',
    '通用權限': '通用權限',
    '分页器': '分頁器',
    '視圖混入': '視圖混入',
    '使用者上传檔案': '使用者上傳檔案',
    '静态檔案收集目錄': '靜態檔案收集目錄',
    
    # 文字中的簡體
    '名称': '名稱',
    '对应': '對應',
    '对照': '對照',
    '等价': '等價',
    '頻道名称': '頻道名稱',
    '频道': '頻道',
    '缩略图': '縮圖',
    '观看次数': '觀看次數',
    '点赞': '按讚',
    '点赞数': '按讚數',
    '浏览量': '瀏覽量',
    '时长': '時長',
    '分钟': '分鐘',
    '短片': '短片',
    '中等': '中等',
    '长片': '長片',
    '推荐': '推薦',
    '书签': '書籤',
    '收藏': '收藏',
    '多种': '多種',
    '建立使用者': '建立使用者',
    '管理员': '管理員',
    '详情': '詳情',
    '部分': '部分',
    '室内': '室內',
    '竞技': '競技',
    '装备': '裝備',
    '评测': '評測',
    
    # API 相關
    '凭证': '憑證',
    '未提供': '未提供',
    '這个欄位': '此欄位',
    '级别': '層級',
    '场景': '場景',
    '公开': '公開',
    '只读': '唯讀',
    '可写': '可寫',
    '仅': '僅',
    '任意': '任意',
    '登出': '登出',
    '刷新': '重新整理',
    '修改': '修改',
    '目前使用者': '目前使用者',
    '使用者列表': '使用者列表',
    '使用者详情': '使用者詳情',
    '使用者的': '使用者的',
    '岩馆': '岩館',
    
    # 一般用語
    '阅读': '閱讀',
    '繼續阅读': '繼續閱讀',
    '具体': '具體',
    '代码': '程式碼',
    '编写': '編寫',
    '附录': '附錄',
    '总结': '總結',
    '一个': '一個',
    '多个': '多個',
    '属于': '屬於',
    '多对多': '多對多',
    '建议': '建議',
    '常见': '常見',
    '倒序': '降序',
    '时间': '時間',
    
    # 額外補充
    '与架構': '與架構',
    '用户': '使用者',
    '对于': '對於',
    '调试': '除錯',
    '除錯工具': '除錯工具',
    '驱动': '驅動程式',
    '过滤': '過濾',
    '云存储': '雲端儲存',
    '服务器': '伺服器',
    '服務': '服務',
    '静态': '靜態',
    '缓存': '快取',
    '异步': '非同步',
    '代码': '程式碼',
    '交互': '互動',
    
    # 分號相關
    '分類別': '分類',
    '類別別': '類別',
}

def convert_file(filename):
    """轉換單個檔案"""
    try:
        with open(filename, 'r', encoding='utf-8') as f:
            content = f.read()
        
        # 進行轉換
        for simp, trad in final_replacements.items():
            content = content.replace(simp, trad)
        
        # 寫回檔案
        with open(filename, 'w', encoding='utf-8') as f:
            f.write(content)
        
        print(f"✓ 已完成最終轉換: {filename}")
        return True
    except Exception as e:
        print(f"✗ 錯誤 {filename}: {e}")
        return False

if __name__ == '__main__':
    files = [
        '01-django-basics-for-nodejs-developers.md',
        '02-project-structure-and-planning.md',
        '03-api-implementation-guide.md'
    ]
    
    for filename in files:
        convert_file(filename)
    
    print("\n✓ 所有檔案已完成繁體中文轉換！")
