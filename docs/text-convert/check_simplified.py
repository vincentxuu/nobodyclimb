#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import re
import sys

# å¸¸è¦‹ç°¡é«”å­—åˆ—è¡¨
simplified_chars = [
    'ä¸ª', 'ä¸º', 'ä¹¦', 'ä¹ˆ', 'ä»', 'æ¥', 'ä»¬', 'ä¼š', 'å†™', 'è®©',
    'è®¤', 'è®°', 'è®¡', 'è®®', 'è®¯', 'è®¾', 'è®¿', 'è¯', 'è¯„', 'è¯†',
    'è¯Š', 'è¯', 'è¯‘', 'è¯•', 'è¯¥', 'è¯¦', 'è¯­', 'è¯´', 'è¯·', 'è¯¸',
    'è¯»', 'è°ƒ', 'è°', 'è¯¾', 'è°ˆ', 'è°“', 'è¯š', 'è°‹', 'è°', 'è°œ',
    'è°¢', 'è°¨', 'è°±', 'è°·', 'è±†', 'è´', 'è´¢', 'è´£', 'è´¤', 'è´¥',
    'è´§', 'è´¨', 'è´©', 'è´ª', 'è´­', 'è´¯', 'è´±', 'è´´', 'è´µ', 'è´¹',
    'è´º', 'è´¸', 'èµ„', 'èµ', 'èµ‚', 'èµƒ', 'èµ„', 'èµ‹', 'èµŒ', 'èµ',
    'èµ', 'èµ', 'èµ”', 'èµ–', 'èµš', 'èµ›', 'èµ', 'èµ ', 'èµ¢', 'èµ¤',
    'èµ¶', 'èµ·', 'è¶‹', 'è¶Š', 'è¶Ÿ', 'è·ƒ', 'è·µ', 'è·Ÿ', 'è¸Š', 'è¸ª',
    'èº', 'èº¯', 'è½¦', 'è½¨', 'è½©', 'è½¬', 'è½®', 'è½¯', 'è½°', 'è½´',
    'è½»', 'è½½', 'è¾ƒ', 'è¾…', 'è¾†', 'è¾ˆ', 'è¾‰', 'è¾Š', 'è¾', 'è¾“',
    'è¾–', 'è¾—', 'è¾˜', 'è¾¹', 'è¾¾', 'è¿', 'è¿‡', 'è¿ˆ', 'è¿', 'è¿˜',
    'è¿™', 'è¿›', 'è¿œ', 'è¿', 'è¿', 'è¿Ÿ', 'è¿¹', 'é€‚', 'é€‰', 'é€Š',
    'é€’', 'é€š', 'é€', 'é€Ÿ', 'é€ ', 'é€»', 'é—', 'é‚“', 'é‚®', 'é‚»',
    'éƒ‘', 'é‡Š', 'é‡Œ', 'é‡', 'é’‰', 'é’ˆ', 'é’“', 'é’Ÿ', 'é’¢', 'é’©',
    'é’±', 'é’»', 'é“', 'é“ƒ', 'é“…', 'é“œ', 'é“', 'é“¶', 'é“º', 'é“¾',
    'é”€', 'é”', 'é”…', 'é”‹', 'é”', 'é”™', 'é”¡', 'é”£', 'é”¤', 'é”¦',
    'é”®', 'é”¯', 'é•‡', 'é•œ', 'é•°', 'é—­', 'é—®', 'é—²', 'é—´', 'é—·',
    'é—¸', 'é—¹', 'é—»', 'é˜…', 'é˜Ÿ', 'é˜¶', 'é˜»', 'é˜¿', 'é™†', 'é™ˆ',
    'é™©', 'é™…', 'éš', 'éš', 'éš¾', 'é›‡', 'é›¾', 'é¡»', 'é¡¶', 'é¡·',
    'é¡º', 'é¡»', 'é¡½', 'é¡¾', 'é¡¿', 'é¢', 'é¢‚', 'é¢„', 'é¢†', 'é¢ˆ',
    'é¢‘', 'é¢—', 'é¢˜', 'é¢', 'é¢œ', 'é¢¤', 'é£', 'é£˜', 'é£', 'é¥­',
    'é¥®', 'é¥°', 'é¥±', 'é¥²', 'é¥¼', 'é¥¿', 'é¦†', 'é¦ˆ', 'é©±', 'é©¶',
    'é©»', 'é©¾', 'éª‚', 'éª„', 'éªŒ', 'éª—', 'éªš', 'éª¤', 'éª¨', 'é«“',
    'ä½“', 'é«˜', 'é¬¼', 'é­‚', 'é±¼', 'é²', 'é²œ', 'é¸Ÿ', 'é¸¡', 'é¸£',
    'é¸­', 'é¸¯', 'é¸³', 'é¸µ', 'é¹…', 'é¹Š', 'é¹', 'é¹¤', 'é¹°', 'é¹¿',
    'éº¦', 'éº»', 'é»„', 'é»‘', 'é»˜', 'é¼“', 'é¼ ', 'é¼»', 'é½', 'é½¿',
    'é¾„', 'é¾™', 'é¾Ÿ',
    # å¸¸è¦‹ç°¡é«”è©çµ„
    'æ•°æ®åº“', 'æ•°æ®', 'åº”ç”¨', 'åˆ›å»º', 'åˆ é™¤', 'æŸ¥è¯¢', 'è¯·æ±‚',
    'å“åº”', 'è®¤è¯', 'éªŒè¯', 'ç¯å¢ƒå˜é‡', 'é¡¹ç›®', 'åç«¯', 'å‰ç«¯',
    'ç”¨æˆ·', 'è§†é¢‘', 'å›¾ç‰‡', 'è¯„è®º', 'è¯¦ç»†', 'è®¾ç½®', 'é…ç½®',
    'é»˜è®¤', 'å½“å‰', 'æ‰§è¡Œ', 'å®ç°', 'æµ‹è¯•', 'è°ƒè¯•', 'å¼€å‘',
]

def find_simplified_chinese(filename):
    """æª¢æŸ¥æª”æ¡ˆä¸­çš„ç°¡é«”å­—"""
    try:
        with open(filename, 'r', encoding='utf-8') as f:
            lines = f.readlines()
        
        found_issues = []
        for line_num, line in enumerate(lines, 1):
            for char in simplified_chars:
                if char in line:
                    # æ’é™¤ç¨‹å¼ç¢¼å€å¡Šå’Œè‹±æ–‡å–®è©
                    if not re.match(r'^\s*```', line) and not re.match(r'^\s*[a-zA-Z]', line):
                        found_issues.append({
                            'line': line_num,
                            'char': char,
                            'content': line.strip()[:80]
                        })
        
        return found_issues
    except Exception as e:
        print(f"âœ— è®€å–æª”æ¡ˆéŒ¯èª¤ {filename}: {e}")
        return None

def main():
    files = [
        '01-django-basics-for-nodejs-developers.md',
        '02-project-structure-and-planning.md',
        '03-api-implementation-guide.md',
    ]
    
    total_issues = 0
    
    print("=" * 70)
    print("ç¹é«”ä¸­æ–‡é©—è­‰æª¢æŸ¥")
    print("=" * 70)
    print()
    
    for filename in files:
        print(f"ğŸ“„ æª¢æŸ¥: {filename}")
        issues = find_simplified_chinese(filename)
        
        if issues is None:
            print(f"   âœ— ç„¡æ³•è®€å–æª”æ¡ˆ\n")
            continue
        
        if not issues:
            print(f"   âœ“ æ²’æœ‰ç™¼ç¾ç°¡é«”å­—\n")
        else:
            print(f"   âš  ç™¼ç¾ {len(issues)} è™•å¯èƒ½çš„ç°¡é«”å­—:")
            for issue in issues[:10]:  # åªé¡¯ç¤ºå‰10å€‹
                print(f"   ç¬¬ {issue['line']} è¡Œ: '{issue['char']}' åœ¨ \"{issue['content']}\"")
            if len(issues) > 10:
                print(f"   ... é‚„æœ‰ {len(issues) - 10} è™•")
            print()
            total_issues += len(issues)
    
    print("=" * 70)
    if total_issues == 0:
        print("âœ“ é©—è­‰é€šéï¼æ‰€æœ‰æª”æ¡ˆéƒ½å·²è½‰æ›ç‚ºç¹é«”ä¸­æ–‡ã€‚")
    else:
        print(f"âš  ç™¼ç¾ {total_issues} è™•å¯èƒ½éœ€è¦æª¢æŸ¥çš„ç°¡é«”å­—ã€‚")
    print("=" * 70)

if __name__ == '__main__':
    main()
