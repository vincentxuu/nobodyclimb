# è¨­è¨ˆæ±ºç­–è¨˜éŒ„

## æ–‡ä»¶è³‡è¨Š

- **æ±ºç­–æ—¥æœŸ**: 2026-01-16
- **ç‹€æ…‹**: âœ… å·²å¯¦ä½œ

---

## æœ€çµ‚æ±ºç­–

### ä½ˆå±€æ–¹æ¡ˆï¼šA - ä¸»å¾å¼ä½ˆå±€ï¼ˆMaster-Detailï¼‰

```
æ¡Œé¢ç‰ˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å²©å ´åç¨± + ä½ç½® + å¿«é€Ÿè³‡è¨Šï¼ˆé¡å‹/è·¯ç·šæ•¸/é›£åº¦ç¯„åœï¼‰      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚                                      â”‚
â”‚   è·¯ç·šåˆ—è¡¨       â”‚        è·¯ç·šè©³æƒ… / å²©å ´ä»‹ç´¹           â”‚
â”‚   (å›ºå®šå´é‚Šæ¬„)    â”‚        (ä¸»è¦å…§å®¹å€)                  â”‚
â”‚                  â”‚                                      â”‚
â”‚   - æœå°‹æ¡†       â”‚   é»é¸è·¯ç·š â†’ é¡¯ç¤ºè·¯ç·šè©³æƒ…            â”‚
â”‚   - åˆ†å€ç¯©é¸     â”‚   é»é¸ã€Œå²©å ´ä»‹ç´¹ã€â†’ é¡¯ç¤ºä»‹ç´¹          â”‚
â”‚   - è·¯ç·šæ¸…å–®     â”‚                                      â”‚
â”‚                  â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰‹æ©Ÿç‰ˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å²©å ´åç¨± + å¿«é€Ÿè³‡è¨Š                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  è·¯ç·šè©³æƒ… / å²©å ´ä»‹ç´¹                                    â”‚
â”‚  (ä¸»è¦å…§å®¹å€)                                           â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æµ®å‹•æŒ‰éˆ•] â†’ é–‹å•Ÿè·¯ç·šåˆ—è¡¨æŠ½å±œ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¸æ“‡åŸå› **ï¼š
- é¾æ´æœ‰ 616 æ¢è·¯ç·šï¼Œéœ€è¦é«˜æ•ˆçš„è·¯ç·šç€è¦½æ–¹å¼
- Sidebar å›ºå®šé¡¯ç¤ºï¼Œéš¨æ™‚å¯åˆ‡æ›è·¯ç·š
- ä¸éœ€é é¢è·³è½‰ï¼Œé«”é©—æµæš¢

---

### å°èˆªæ–¹æ¡ˆï¼š4 - éš±è—å¼éºµåŒ…å±‘ï¼ˆSEO å‹å–„ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å› é¾æ´     â”‚  [â‰¡] â† é»æ“Šå±•é–‹éºµåŒ…å±‘               â”‚
â”‚                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  è·¯ç·šåˆ—è¡¨        â”‚  â”‚ é¦–é  > å²©å ´ > é¾æ´ > éŸ³æ¨‚å»³     â”‚ â”‚
â”‚  616 æ¢è·¯ç·š      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                  â”‚                                      â”‚
â”‚  [æœå°‹è·¯ç·š...]   â”‚  ç˜¦é¦¬                                â”‚
â”‚  [éŸ³æ¨‚å»³ â–¼]      â”‚  Skinny Horse                        â”‚
â”‚                  â”‚                                      â”‚
â”‚  è·¯ç·šæ¸…å–®...     â”‚  ğŸ“ éŸ³æ¨‚å»³                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¸æ“‡åŸå› **ï¼š
- ä¿ç•™ JSON-LD çµæ§‹åŒ–è³‡æ–™ï¼Œå° SEO æœ‰å¹«åŠ©
- è¦–è¦ºä¸Šä¸å¹²æ“¾ä¸»è¦å…§å®¹
- é€²éšä½¿ç”¨è€…æœ‰éœ€è¦æ™‚ä»å¯ä½¿ç”¨éºµåŒ…å±‘å¿«é€Ÿè·³è½‰

---

## å¯¦ä½œè¦æ ¼

### 1. é é¢çµæ§‹

```
/crag/[id]                    # å²©å ´è©³æƒ…é ï¼ˆä¸»å¾å¼ä½ˆå±€ï¼‰
â”œâ”€â”€ Sidebar (å·¦å´)
â”‚   â”œâ”€â”€ è¿”å›é€£çµ
â”‚   â”œâ”€â”€ å²©å ´åç¨± + è·¯ç·šæ•¸
â”‚   â”œâ”€â”€ æœå°‹æ¡†
â”‚   â”œâ”€â”€ å€åŸŸç¯©é¸ä¸‹æ‹‰
â”‚   â””â”€â”€ è·¯ç·šåˆ—è¡¨
â”‚       â””â”€â”€ RouteListItem (å¯é»æ“Š)
â”‚
â””â”€â”€ MainContent (å³å´)
    â”œâ”€â”€ éš±è—å¼éºµåŒ…å±‘
    â”œâ”€â”€ è·¯ç·šè©³æƒ… æˆ– å²©å ´ä»‹ç´¹
    â””â”€â”€ åŒå€åŸŸå…¶ä»–è·¯ç·š
```

### 2. éš±è—å¼éºµåŒ…å±‘è¦æ ¼

**è§¸ç™¼æ–¹å¼**ï¼š
- é»æ“Šåœ–ç¤ºæŒ‰éˆ•å±•é–‹/æ”¶åˆ
- é è¨­æ”¶åˆç‹€æ…‹

**è¦–è¦ºè¨­è¨ˆ**ï¼š
- åœ–ç¤ºï¼š`â‰¡` æˆ– `Â·Â·Â·` æˆ–éºµåŒ…å±‘åœ–ç¤º
- å±•é–‹æ™‚ä»¥æµ®å‹•é¢æ¿é¡¯ç¤º
- é»æ“Šå¤–éƒ¨å€åŸŸè‡ªå‹•æ”¶åˆ

**SEO å¯¦ä½œ**ï¼š
- HTML ä¸­ä¿ç•™å®Œæ•´éºµåŒ…å±‘çµæ§‹
- ä½¿ç”¨ CSS `sr-only` æˆ–è¦–è¦ºéš±è—
- JSON-LD çµæ§‹åŒ–è³‡æ–™å§‹çµ‚è¼¸å‡º

```html
<!-- è¦–è¦ºéš±è—ä½† SEO å¯è®€ -->
<nav aria-label="breadcrumb" class="sr-only">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="/"><span itemprop="name">é¦–é </span></a>
      <meta itemprop="position" content="1" />
    </li>
    <!-- ... -->
  </ol>
</nav>

<!-- JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [...]
}
</script>
```

### 3. Sidebar è¦æ ¼

**æ¡Œé¢ç‰ˆ** (`route-sidebar.tsx`)ï¼š
- å¯¬åº¦ï¼š320px (w-80)
- å›ºå®šåœ¨å·¦å´
- é«˜åº¦ï¼šæ»¿ç‰ˆï¼ˆæ¸›å» headerï¼‰
- å…§éƒ¨å¯æ»¾å‹•

**æ‰‹æ©Ÿç‰ˆ** (`route-mobile-drawer.tsx`)ï¼š
- æµ®å‹•æŒ‰éˆ•è§¸ç™¼
- å¾åº•éƒ¨æ»‘å‡º
- æœ€å¤§é«˜åº¦ï¼š70vh
- æœ‰æ‹–æ›³æŠŠæ‰‹

### 4. è·¯ç·šåˆ—è¡¨é …ç›®è¦æ ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è·¯ç·šåç¨±                      5.10a â”‚
â”‚ å€åŸŸåç¨±                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- é»æ“Šæ•´åˆ—åˆ‡æ›è·¯ç·š
- ç•¶å‰è·¯ç·šé«˜äº®é¡¯ç¤º
- é¡¯ç¤ºï¼šè·¯ç·šåç¨±ã€é›£åº¦ã€å€åŸŸ

### 5. ä¸»å…§å®¹å€è¦æ ¼

**è·¯ç·šè©³æƒ…åŒ…å«**ï¼š
- è·¯ç·šåç¨±ï¼ˆä¸­/è‹±ï¼‰
- ä½ç½®æ¨™ç¤ºï¼ˆğŸ“ å€åŸŸåç¨±ï¼‰
- é›£åº¦æ¨™ç±¤ + é¡å‹æ¨™ç±¤
- è³‡è¨Šå¡ç‰‡ï¼ˆé•·åº¦ã€é¡å‹ã€é¦–æ”€è€…ï¼‰
- è·¯ç·šæè¿°
- åŒå€åŸŸå…¶ä»–è·¯ç·šæ¨è–¦

**å²©å ´ä»‹ç´¹åŒ…å«**ï¼š
- å²©å ´æè¿°
- åŸºæœ¬è³‡è¨Š
- äº¤é€šæ–¹å¼
- åœ°åœ–
- è¨­æ–½
- å¤©æ°£é å ±
- å³æ™‚è·¯æ³

---

## å…ƒä»¶æ¸…å–®

### éœ€è¦ä¿®æ”¹çš„å…ƒä»¶

| å…ƒä»¶ | ä¿®æ”¹å…§å®¹ |
|-----|---------|
| `CragDetailClient.tsx` | æ”¹ç‚ºä¸»å¾å¼ä½ˆå±€ |
| `route-sidebar.tsx` | æ•´åˆåˆ°å²©å ´é é¢ |
| `route-mobile-drawer.tsx` | æ•´åˆåˆ°å²©å ´é é¢ |

### éœ€è¦æ–°å¢çš„å…ƒä»¶

| å…ƒä»¶ | èªªæ˜ |
|-----|------|
| `CollapsibleBreadcrumb.tsx` | éš±è—å¼éºµåŒ…å±‘ |
| `RouteDetailPanel.tsx` | è·¯ç·šè©³æƒ…é¢æ¿ï¼ˆå³å´ï¼‰ |
| `CragInfoPanel.tsx` | å²©å ´ä»‹ç´¹é¢æ¿ï¼ˆå³å´ï¼‰ |

### å¯ç§»é™¤çš„å…ƒä»¶

| å…ƒä»¶ | åŸå›  |
|-----|------|
| `route-section.tsx` | æ”¹ç”¨ Sidebar è·¯ç·šåˆ—è¡¨ |

---

## é é¢æµç¨‹

```
ä½¿ç”¨è€…é€²å…¥å²©å ´é é¢
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é è¨­é¡¯ç¤ºã€Œå²©å ´ä»‹ç´¹ã€                â”‚
â”‚  Sidebar é¡¯ç¤ºæ‰€æœ‰è·¯ç·šåˆ—è¡¨            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ é»æ“Šè·¯ç·š
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å³å´åˆ‡æ›ç‚ºã€Œè·¯ç·šè©³æƒ…ã€              â”‚
â”‚  Sidebar è©²è·¯ç·šé«˜äº®                  â”‚
â”‚  URL æ›´æ–°ç‚º /crag/[id]?route=[routeId]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ é»æ“Šã€Œå²©å ´ä»‹ç´¹ã€æˆ–æ¸…é™¤é¸æ“‡
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å³å´åˆ‡æ›å›ã€Œå²©å ´ä»‹ç´¹ã€              â”‚
â”‚  URL æ›´æ–°ç‚º /crag/[id]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## URL çµæ§‹

```
/crag                           # å²©å ´åˆ—è¡¨
/crag/longdong                  # é¾æ´å²©å ´ï¼ˆé è¨­é¡¯ç¤ºä»‹ç´¹ï¼‰
/crag/longdong?route=skinny-horse  # é¾æ´å²©å ´ + ç˜¦é¦¬è·¯ç·šè©³æƒ…
/crag/longdong?route=skinny-horse&area=music-hall  # å¸¶å€åŸŸç¯©é¸
```

**å„ªé»**ï¼š
- å–®é æ‡‰ç”¨ï¼Œåˆ‡æ›è·¯ç·šä¸éœ€é‡æ–°è¼‰å…¥
- URL å¯åˆ†äº«ç‰¹å®šè·¯ç·š
- ç€è¦½å™¨ä¸Š/ä¸‹ä¸€é å¯æ­£å¸¸é‹ä½œ

---

## å¯¦ä½œé€²åº¦

1. [x] å»ºç«‹ `CollapsibleBreadcrumb` å…ƒä»¶
2. [x] å»ºç«‹ `RoutePreviewPanel` å…ƒä»¶
3. [x] å»ºç«‹ `CragInfoPanel` å…ƒä»¶ï¼ˆæœªä½¿ç”¨ï¼Œå…§å®¹ç›´æ¥åœ¨ CragDetailClientï¼‰
4. [x] å»ºç«‹å²©å ´é  `layout.tsx` + `CragLayoutClient.tsx`
5. [x] ä¿®æ”¹ `CragDetailClient` ç§»é™¤è·¯ç·š Tabï¼Œæ”¹ç”¨ Sidebar
6. [x] ä¿®æ”¹ `RouteDetailClient` ä½¿ç”¨éš±è—å¼éºµåŒ…å±‘
7. [x] æ–°å¢ `getRoutePreviewData()` å‡½æ•¸

## å·²å»ºç«‹/ä¿®æ”¹çš„æª”æ¡ˆ

**æ–°å¢**ï¼š
- `src/components/ui/collapsible-breadcrumb.tsx` - éš±è—å¼éºµåŒ…å±‘å…ƒä»¶
- `src/components/crag/route-preview-panel.tsx` - è·¯ç·šé è¦½é¢æ¿ï¼ˆå‚™ç”¨ï¼‰
- `src/components/crag/crag-info-panel.tsx` - å²©å ´ä»‹ç´¹é¢æ¿ï¼ˆå‚™ç”¨ï¼‰
- `src/components/crag/route-list-filter.tsx` - è·¯ç·šç¯©é¸å…ƒä»¶
- `src/components/crag/route-sidebar.tsx` - æ¡Œé¢ç‰ˆå´é‚Šæ¬„
- `src/components/crag/route-mobile-drawer.tsx` - æ‰‹æ©Ÿç‰ˆæŠ½å±œ
- `src/app/crag/[id]/route/layout.tsx` - è·¯ç·šé  layout
- `src/app/crag/[id]/route/RouteLayoutClient.tsx` - è·¯ç·šé  layout å®¢æˆ¶ç«¯å…ƒä»¶

**ä¿®æ”¹**ï¼š
- `src/lib/crag-data.ts` - æ–°å¢ RouteSidebarItemã€RoutePreviewItem é¡å‹å’Œç›¸é—œå‡½æ•¸
- `src/app/crag/[id]/CragDetailClient.tsx` - æ•´åˆ Sidebarï¼Œç§»é™¤ Tabï¼Œä½¿ç”¨éš±è—å¼éºµåŒ…å±‘
- `src/app/crag/[id]/route/[routeId]/RouteDetailClient.tsx` - æ”¹ç”¨éš±è—å¼éºµåŒ…å±‘

**èªªæ˜**ï¼š
- å²©å ´é  Sidebar ç›´æ¥æ•´åˆåœ¨ `CragDetailClient.tsx` ä¸­ï¼ˆé¿å…èˆ‡è·¯ç·šé  layout è¡çªï¼‰
- è·¯ç·šé ä½¿ç”¨ç¨ç«‹çš„ `route/layout.tsx` æä¾› Sidebar

## ä¸‹ä¸€æ­¥ï¼ˆå¯é¸ï¼‰

- [ ] æ¸¬è©¦æ‰‹æ©Ÿç‰ˆæŠ½å±œ
- [ ] èª¿æ•´æ¨£å¼ç´°ç¯€
- [ ] åŠ å…¥æ›´å¤šè·¯ç·šé è¦½è³‡è¨Š

