# 導航系統重新設計

## 文件資訊

- **建立日期**: 2026-01-16
- **狀態**: 規劃中
- **關聯文件**: `layout-design.md`

---

## 1. 問題描述

### 1.1 現況截圖分析

目前路線詳情頁存在以下導航元素：

```
┌──────────────────┬──────────────────────────────────────┐
│  ← 返回 龍洞     │  首頁 > 岩場 > 龍洞 > 音樂廳 > 瘦馬  │  ← 麵包屑
│                  │                                      │
│  路線列表        │  📍 龍洞 / 音樂廳                    │  ← 位置標示
│  616 條路線      │                                      │
│                  │  瘦馬                                │
│  [搜尋路線...]   │  Skinny Horse                        │
│  [第一洞 ▼]      │                                      │
│                  │  [5.9]  [Traditional]                │
│  路線清單...     │                                      │
└──────────────────┴──────────────────────────────────────┘
     ↑                        ↑
   Sidebar               主內容區
```

### 1.2 重複問題

| 導航功能 | 麵包屑 | Sidebar | 位置標示 |
|---------|--------|---------|---------|
| 返回岩場 | ✓ 龍洞 | ✓ 返回龍洞 | - |
| 顯示區域 | ✓ 音樂廳 | ✓ 篩選器 | ✓ 龍洞/音樂廳 |
| 回首頁 | ✓ 首頁 | - | - |
| 岩場列表 | ✓ 岩場 | - | - |

**問題**：
1. 「返回岩場」功能出現 2 次
2. 「當前區域」資訊出現 3 次
3. 視覺上過於複雜，使用者不知該點哪裡

---

## 2. 設計原則

### 2.1 導航層級定義

```
Level 0: 首頁
Level 1: 岩場列表頁
Level 2: 岩場詳情頁（龍洞）
Level 3: 區域詳情頁（音樂廳）← 可選
Level 4: 路線詳情頁（瘦馬）
```

### 2.2 導航需求分析

| 使用情境 | 需要的導航 |
|---------|-----------|
| 切換到其他路線 | Sidebar 路線列表 |
| 返回岩場頁面 | Sidebar「返回」或麵包屑 |
| 查看同區域其他路線 | Sidebar 區域篩選 |
| 回到首頁/岩場列表 | Header 導航或麵包屑 |

### 2.3 設計原則

1. **單一職責**：每個導航元素只負責一個功能
2. **減少重複**：相同功能不重複出現
3. **就近原則**：最常用的導航放在最容易觸及的位置
4. **一致性**：整個網站導航邏輯一致

---

## 3. 導航方案

### 3.1 方案 1：移除麵包屑，保留 Sidebar（推薦）

```
┌──────────────────┬──────────────────────────────────────┐
│  ← 返回 龍洞     │                                      │
│                  │  瘦馬                                │
│  路線列表        │  Skinny Horse                        │
│  616 條路線      │                                      │
│                  │  📍 音樂廳                           │
│  [搜尋路線...]   │                                      │
│  [音樂廳 ▼]      │  [5.9]  [Traditional]                │
│                  │                                      │
│  路線清單...     │  路線內容...                         │
└──────────────────┴──────────────────────────────────────┘
```

**變更內容**：
- 移除麵包屑導航
- 保留 Sidebar 的「返回龍洞」連結
- 右側只保留簡化的位置標示「📍 音樂廳」
- 移除重複的「龍洞 / 音樂廳」

**優點**：
- 介面簡潔
- Sidebar 已提供完整導航功能
- 減少視覺干擾

**缺點**：
- 無法一鍵回到首頁或岩場列表（需透過 Header）
- SEO 考量：麵包屑對搜尋引擎有幫助

**實作難度**：低

---

### 3.2 方案 2：簡化麵包屑，只保留一層返回

```
┌──────────────────┬──────────────────────────────────────┐
│  ← 返回 龍洞     │                                      │
│                  │  ← 音樂廳                            │
│  路線列表        │                                      │
│  616 條路線      │  瘦馬                                │
│                  │  Skinny Horse                        │
│  [搜尋路線...]   │                                      │
│  [音樂廳 ▼]      │  [5.9]  [Traditional]                │
│                  │                                      │
│  路線清單...     │  路線內容...                         │
└──────────────────┴──────────────────────────────────────┘
```

**變更內容**：
- 移除完整麵包屑路徑
- 主內容區只保留「← 音樂廳」返回區域連結
- Sidebar 保留「返回龍洞」

**優點**：
- 提供返回區域的快捷方式
- 層級關係清楚：Sidebar 返回岩場，內容區返回區域

**缺點**：
- 仍有兩個返回按鈕
- 使用者可能困惑該點哪個

**實作難度**：低

---

### 3.3 方案 3：完全移除，Sidebar 處理所有導航

```
┌──────────────────┬──────────────────────────────────────┐
│  ← 龍洞          │                                      │
│    └ 音樂廳      │  瘦馬                                │
│                  │  Skinny Horse                        │
│  路線列表        │                                      │
│  51 條路線       │  [5.9]  [Traditional]  [音樂廳]      │
│                  │                                      │
│  [搜尋路線...]   │  路線內容...                         │
│                  │                                      │
│  路線清單...     │                                      │
└──────────────────┴──────────────────────────────────────┘
```

**變更內容**：
- 完全移除麵包屑和位置標示
- Sidebar 頂部顯示階層：龍洞 > 音樂廳
- 區域以標籤形式顯示在路線標題下方
- Sidebar 篩選器自動選中當前區域

**優點**：
- 最簡潔的設計
- 所有導航集中在 Sidebar
- 不會有重複資訊

**缺點**：
- Sidebar 需要顯示更多資訊
- 手機版抽屜需要調整

**實作難度**：中

---

### 3.4 方案 4：保留隱藏式麵包屑（SEO 友善）

```
┌──────────────────┬──────────────────────────────────────┐
│  ← 返回 龍洞     │  ┌─────────────────────────────────┐ │
│                  │  │ 首頁 > 岩場 > 龍洞 > 音樂廳     │ │  ← 隱藏式
│  路線列表        │  └─────────────────────────────────┘ │    (hover 顯示)
│  616 條路線      │                                      │
│                  │  瘦馬                                │
│  [搜尋路線...]   │  Skinny Horse                        │
│  [音樂廳 ▼]      │                                      │
│                  │  📍 音樂廳                           │
│  路線清單...     │                                      │
└──────────────────┴──────────────────────────────────────┘
```

**變更內容**：
- 麵包屑預設隱藏，hover 或點擊圖示時顯示
- 保留 JSON-LD 結構化資料供搜尋引擎使用
- 視覺上不干擾主要內容

**優點**：
- 兼顧 SEO 需求
- 介面簡潔
- 有需要時仍可使用麵包屑

**缺點**：
- 實作較複雜
- 使用者可能不知道有隱藏功能

**實作難度**：中

---

## 4. 方案比較

| 方案 | 簡潔度 | SEO | 導航完整性 | 實作難度 |
|------|-------|-----|-----------|---------|
| 1. 移除麵包屑 | ★★★★★ | ★★☆ | ★★★★☆ | 低 |
| 2. 簡化麵包屑 | ★★★★☆ | ★★☆ | ★★★★★ | 低 |
| 3. Sidebar 全導航 | ★★★★★ | ★★☆ | ★★★★☆ | 中 |
| 4. 隱藏式麵包屑 | ★★★★☆ | ★★★★★ | ★★★★★ | 中 |

---

## 5. 推薦方案

### 5.1 短期建議：方案 1（移除麵包屑）

理由：
1. **最快實作** - 只需移除麵包屑元件
2. **解決核心問題** - 消除視覺重複
3. **Sidebar 已足夠** - 提供完整的路線瀏覽功能

### 5.2 長期建議：方案 4（隱藏式麵包屑）

理由：
1. **SEO 友善** - 結構化資料幫助搜尋引擎理解頁面層級
2. **進階使用者** - 有需要時可快速跳轉
3. **漸進增強** - 不影響主要使用體驗

---

## 6. 實作細節

### 6.1 方案 1 實作步驟

1. **移除麵包屑元件**
   - 檔案：`src/app/crag/[id]/route/[routeId]/page.tsx`
   - 移除 `<Breadcrumb>` 元件

2. **簡化位置標示**
   - 將「龍洞 / 音樂廳」改為只顯示「📍 音樂廳」
   - 使用小字體和淺色，降低視覺權重

3. **調整 Sidebar 樣式**
   - 確保「返回龍洞」按鈕醒目
   - 當前區域在篩選器中高亮顯示

### 6.2 程式碼變更範圍

```
src/
├── app/crag/[id]/route/[routeId]/
│   └── page.tsx              # 移除麵包屑
├── components/crag/
│   ├── route-sidebar.tsx     # 調整返回連結樣式
│   └── route-detail.tsx      # 簡化位置標示（如有）
```

### 6.3 手機版考量

手機版使用抽屜（Drawer）取代 Sidebar，需確保：
- 抽屜標題顯示「返回龍洞」連結
- 當前路線有明顯高亮
- 區域篩選功能正常運作

---

## 7. 驗收標準

- [ ] 路線詳情頁無重複導航元素
- [ ] 可透過 Sidebar 返回岩場頁面
- [ ] 可透過 Sidebar 切換到其他路線
- [ ] 手機版抽屜功能正常
- [ ] 位置資訊清楚但不干擾主內容

