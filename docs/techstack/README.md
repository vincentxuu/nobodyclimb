# NobodyClimb 技術棧文件

> 最後更新：2025-01-29

## 目錄

1. [技術架構總覽](#技術架構總覽)
2. [Monorepo 結構](./monorepo.md)
3. [Web 技術棧](./web.md)
4. [App 技術棧](./app.md)
5. [Backend 技術棧](./backend.md)
6. [CI/CD Pipeline](./cicd.md)

---

## 技術架構總覽

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              Client Layer                                    │
├───────────────────────────────────┬─────────────────────────────────────────┤
│          Web (Next.js 15)         │         App (React Native)              │
│  ┌─────────────────────────────┐  │  ┌─────────────────────────────────┐    │
│  │ React 19                    │  │  │ React Native 0.76+              │    │
│  │ TailwindCSS + Radix UI      │  │  │ Expo SDK 52+                    │    │
│  │ Framer Motion               │  │  │ React Native Paper / NativeWind │    │
│  │ Cloudflare Workers 部署     │  │  │ React Navigation / Expo Router  │    │
│  └─────────────────────────────┘  │  └─────────────────────────────────┘    │
├───────────────────────────────────┴─────────────────────────────────────────┤
│                            Shared Packages                                   │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────────┐   │
│  │  types   │ │ schemas  │ │  utils   │ │  hooks   │ │    api-client    │   │
│  │ 型別定義 │ │ Zod驗證  │ │ 工具函式 │ │ 共用邏輯 │ │ API封裝(平台分離)│   │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            API Gateway Layer                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│  Cloudflare Workers                                                          │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ Hono Framework │ JWT Authentication │ Rate Limiting │ CORS          │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              Data Layer                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────────┐  ┌─────────────────────────┐  │
│  │ D1 (SQLite)     │  │ R2 (Object Storage) │  │ KV (Key-Value Cache)    │  │
│  │ 主資料庫        │  │ 圖片/檔案儲存       │  │ 快取                    │  │
│  └─────────────────┘  └─────────────────────┘  └─────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 技術選型原則

1. **Edge-First**: 使用 Cloudflare 全球邊緣網路，降低延遲
2. **Type-Safe**: 全面使用 TypeScript，前後端共享型別
3. **Serverless**: 無伺服器架構，按需擴展，成本優化
4. **Platform-Specific UI**: Web 和 App 各自使用最適合的 UI 框架
5. **Shared Logic**: 共用業務邏輯、型別、驗證，減少重複

## 版本資訊

### 共用

| 類別 | 技術 | 版本 |
|------|------|------|
| **Runtime** | Node.js | 20.x |
| **Package Manager** | pnpm | 9.x |
| **Language** | TypeScript | 5.9.x |
| **Monorepo** | pnpm workspaces | - |
| **Build Tool** | Turborepo (選用) | 2.x |

### Web

| 類別 | 技術 | 版本 |
|------|------|------|
| **Framework** | Next.js | 15.5.x |
| **React** | React | 19.1.x |
| **Styling** | TailwindCSS | 3.4.x |
| **UI Components** | Radix UI | 各元件獨立版本 |
| **Animation** | Framer Motion | 12.23.x |

### App

| 類別 | 技術 | 版本 |
|------|------|------|
| **Framework** | React Native | 0.76.x |
| **Toolchain** | Expo | SDK 52+ |
| **React** | React | 18.3.x |
| **Navigation** | Expo Router | 4.x |
| **UI Components** | React Native Paper / NativeWind | 最新 |

### Backend

| 類別 | 技術 | 版本 |
|------|------|------|
| **Framework** | Hono | 4.6.x |
| **Runtime** | Cloudflare Workers | - |
| **Database** | Cloudflare D1 | - |
| **Storage** | Cloudflare R2 | - |

### 狀態管理 (Web + App 共用)

| 類別 | 技術 | 版本 |
|------|------|------|
| **Global State** | Zustand | 4.5.x |
| **Server State** | TanStack Query | 5.85.x |
| **Form** | React Hook Form | 7.62.x |
| **Validation** | Zod | 3.25.x |
