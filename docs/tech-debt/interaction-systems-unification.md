# NobodyClimb äº’å‹•ç³»çµ±æŠ€è¡“å‚µå‹™åˆ†æ

**ç‹€æ…‹**: ğŸ”´ é«˜å„ªå…ˆç´šæŠ€è¡“å‚µ
**å»ºç«‹æ—¥æœŸ**: 2026-01-23
**æœ€å¾Œæ›´æ–°**: 2026-01-23
**é ä¼°é‡æ§‹æ™‚é–“**: 5-6 é€±
**å½±éŸ¿ç¯„åœ**: 15+ çµ„ä»¶, 1000+ è¡Œé‡è¤‡ä»£ç¢¼

---

## åŸ·è¡Œæ‘˜è¦

NobodyClimb ç³»çµ±ä¸­å­˜åœ¨**å››å¥—åŠŸèƒ½ç›¸ä¼¼ä½†å¯¦ä½œå®Œå…¨ä¸åŒ**çš„äº’å‹•å¯¦ä½œæ–¹å¼,é€ æˆ:

- **1000+ è¡Œ**é‡è¤‡ä»£ç¢¼
- ç”¨æˆ¶é«”é©—ä¸ä¸€è‡´ (åœ–æ¨™ã€é¡è‰²ã€UI æ¨¡å¼ä¸åŒ)
- ç¶­è­·æˆæœ¬é«˜ (ä¿®æ”¹éœ€åŒæ­¥å››è™•)
- æ•ˆèƒ½ä¸ä¸€è‡´ (éƒ¨åˆ†æœ‰å¿«å–å’Œæ¨‚è§€æ›´æ–°,éƒ¨åˆ†æ²’æœ‰)

### æ¶æ§‹å°æ¯”åœ–

#### ç•¶å‰æ¶æ§‹ (æ··äº‚)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å‰ç«¯å±¤ (4å¥—ç¨ç«‹å¯¦ä½œ)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   æ–‡ç« ç³»çµ±    â”‚  â”‚  äººç‰©èªŒä¸»é«”   â”‚  â”‚  ç« ç¯€å…§å®¹     â”‚  â”‚ äººç”Ÿæ¸…å–®  â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚          â”‚ â”‚
â”‚  â”‚  å…§è¯å¯¦ä½œ     â”‚  â”‚ BiographyLikeâ”‚  â”‚ ContentLike  â”‚  â”‚LikeButtonâ”‚ â”‚
â”‚  â”‚  + blog/     â”‚  â”‚ Button       â”‚  â”‚ Button       â”‚  â”‚          â”‚ â”‚
â”‚  â”‚  Comment     â”‚  â”‚ Biography    â”‚  â”‚ Content      â”‚  â”‚Comment   â”‚ â”‚
â”‚  â”‚  Section     â”‚  â”‚ Comment      â”‚  â”‚ Comment      â”‚  â”‚Section   â”‚ â”‚
â”‚  â”‚  (330è¡Œ)     â”‚  â”‚ Section      â”‚  â”‚ Sheet        â”‚  â”‚          â”‚ â”‚
â”‚  â”‚              â”‚  â”‚ (478è¡Œ)      â”‚  â”‚ (398è¡Œ)      â”‚  â”‚(353è¡Œ)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â†“                  â†“                  â†“                â†“        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚postService   â”‚  â”‚biographyServ â”‚  â”‚biographyContentâ”‚ â”‚bucketListâ”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚Service       â”‚  â”‚Service   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â†“                  â†“                  â†“                â†“        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              å¾Œç«¯ API (å·²çµ±ä¸€)                      â”‚
        â”‚  POST /posts/:id/like                            â”‚
        â”‚  POST /biographies/:id/like                      â”‚
        â”‚  POST /core-stories/:id/like                     â”‚
        â”‚  POST /bucket-list/:id/like                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           è³‡æ–™åº« (å®Œå…¨çµ±ä¸€è¨­è¨ˆ)                     â”‚
        â”‚  likes (entity_type, entity_id, user_id)         â”‚
        â”‚  bookmarks (entity_type, entity_id, user_id)     â”‚
        â”‚  comments (entity_type, entity_id, user_id)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å•é¡Œ**: å‰ç«¯ 4 å¥—å¯¦ä½œ â†’ å¾Œç«¯çµ±ä¸€ API â†’ è³‡æ–™åº«çµ±ä¸€è¡¨
**çµæœ**: ç¶­è­·å™©å¤¢,é‡è¤‡ä»£ç¢¼ 1000+ è¡Œ

---

#### çµ±ä¸€å¾Œæ¶æ§‹ (æ¸…æ™°)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯å±¤ (çµ±ä¸€çµ„ä»¶ç³»çµ±)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚               æ‰€æœ‰å…§å®¹é¡å‹éƒ½ä½¿ç”¨ç›¸åŒçµ„ä»¶                           â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  æ–‡ç«   â”‚ äººç‰©èªŒ â”‚ æ ¸å¿ƒæ•…äº‹ â”‚ å°æ•…äº‹ â”‚ ä¸€å¥è©± â”‚ äººç”Ÿæ¸…å–® â”‚ ...     â”‚ â”‚
â”‚  â”‚   â†“       â†“        â†“         â†“        â†“        â†“                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚         UnifiedLikeButton                            â”‚        â”‚ â”‚
â”‚  â”‚  â”‚         (~150è¡Œ,å¯é…ç½®åœ–æ¨™/é¡è‰²/å°ºå¯¸)                 â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚         UnifiedBookmarkButton                        â”‚        â”‚ â”‚
â”‚  â”‚  â”‚         (~120è¡Œ,æ”¯æ´6ç¨®å…§å®¹é¡å‹)                      â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚         UnifiedCommentSection                        â”‚        â”‚ â”‚
â”‚  â”‚  â”‚         (~300è¡Œ,æ”¯æ´Sheet/Inlineæ¨¡å¼)                â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚                              â†“                                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚         TanStack Query Hooks                         â”‚        â”‚ â”‚
â”‚  â”‚  â”‚  useEntityLike, useEntityBookmark, useEntityComments â”‚        â”‚ â”‚
â”‚  â”‚  â”‚  (~200è¡Œ,çµ±ä¸€å¿«å–å’Œæ¨‚è§€æ›´æ–°)                          â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚                              â†“                                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚         Service æ˜ å°„å±¤                               â”‚        â”‚ â”‚
â”‚  â”‚  â”‚  æ ¹æ“š entityType èª¿ç”¨å°æ‡‰ Service                    â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              å¾Œç«¯ API (å·²çµ±ä¸€)                      â”‚
        â”‚  çµ±ä¸€çš„ Toggle æ¨¡å¼å’Œæ•¸æ“šæ ¼å¼                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           è³‡æ–™åº« (å®Œå…¨çµ±ä¸€è¨­è¨ˆ)                     â”‚
        â”‚  likes, bookmarks, comments                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å„ªå‹¢**: å‰ç«¯çµ±ä¸€ â†’ å¾Œç«¯çµ±ä¸€ â†’ è³‡æ–™åº«çµ±ä¸€
**çµæœ**: æ˜“ç¶­è­·,ä»£ç¢¼æ¸›å°‘ 51%,æ–°åŠŸèƒ½é›¶æˆæœ¬

### æ”¯æ´äº’å‹•çš„å…§å®¹é¡å‹

ç³»çµ±ç›®å‰æ”¯æ´ä»¥ä¸‹å…§å®¹é¡å‹çš„äº’å‹•:

#### å·²å¯¦ä½œæŒ‰è®šå’Œç•™è¨€åŠŸèƒ½

1. **æ–‡ç«  (Posts)** - éƒ¨è½æ ¼æ–‡ç«  + **æ”¶è—åŠŸèƒ½**
2. **äººç‰©èªŒ (Biographies)** - æ”€å²©è€…äººç‰©èªŒ
3. **æ ¸å¿ƒæ•…äº‹ (Core Stories)** - äººç‰©èªŒä¸­çš„3å€‹æ ¸å¿ƒå•é¡Œ
4. **å°æ•…äº‹ (Stories)** - äººç‰©èªŒä¸­çš„é€²éšæ•…äº‹
5. **ä¸€å¥è©±ç³»åˆ— (One-liners)** - äººç‰©èªŒä¸­çš„å¿«å•å¿«ç­”
6. **äººç”Ÿæ¸…å–® (Bucket List Items)** - æ”€å²©ç›®æ¨™æ¸…å–®

#### è³‡æ–™åº«æ”¯æ´ä½†å‰ç«¯æœªå¯¦ä½œ (æœªä¾†åŠŸèƒ½)

7. Gallery (ç›¸ç°¿) - æ”¯æ´æŒ‰è®šã€æ”¶è—ã€ç•™è¨€
8. Video (å½±ç‰‡) - æ”¯æ´æŒ‰è®šã€æ”¶è—ã€ç•™è¨€
9. Gym (å®¤å…§å²©é¤¨) - æ”¯æ´æŒ‰è®šã€æ”¶è—ã€ç•™è¨€
10. Crag (æˆ¶å¤–å²©å ´) - æ”¯æ´æŒ‰è®šã€æ”¶è—ã€ç•™è¨€
11. Route (æ”€å²©è·¯ç·š) - æ”¯æ´æŒ‰è®šã€ç•™è¨€

**å»ºè­°**: Q1/Q2 2026 é€²è¡Œçµ±ä¸€é‡æ§‹,å»ºç«‹å–®ä¸€å¯é…ç½®çš„äº’å‹•çµ„ä»¶ç³»çµ±,ç‚ºæœªä¾†åŠŸèƒ½æ“´å±•å¥ å®šåŸºç¤ã€‚

### äº’å‹•æµç¨‹åœ–

#### çµ±ä¸€çµ„ä»¶ä½¿ç”¨æµç¨‹

```mermaid
graph TB
    A[ç”¨æˆ¶é»æ“ŠæŒ‰è®š] --> B{æ˜¯å¦ç™»å…¥?}
    B -->|å¦| C[è·³è½‰ç™»å…¥é ]
    B -->|æ˜¯| D[æ¨‚è§€æ›´æ–° UI<br/>< 50ms]
    D --> E[èª¿ç”¨ API]
    E --> F{API æˆåŠŸ?}
    F -->|æ˜¯| G[æ›´æ–°å¿«å–<br/>TanStack Query]
    F -->|å¦| H[å›æ»¾ UI<br/>é¡¯ç¤ºéŒ¯èª¤ Toast]
    G --> I[5åˆ†é˜å…§<br/>ä½¿ç”¨å¿«å–]

    style D fill:#90EE90
    style H fill:#FFB6C6
    style I fill:#87CEEB
```

#### æ•¸æ“šæµç¨‹

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ¶
    participant UI as UnifiedLikeButton
    participant Hook as useEntityLikeMutation
    participant Cache as TanStack Query Cache
    participant API as Backend API
    participant DB as Database

    User->>UI: é»æ“ŠæŒ‰è®š
    UI->>Hook: mutateAsync()
    Hook->>Cache: æ¨‚è§€æ›´æ–° (ç«‹å³)
    Hook->>UI: æ›´æ–°é¡¯ç¤º (< 50ms)
    Note over User,UI: ç”¨æˆ¶ç«‹å³çœ‹åˆ°åé¥‹

    Hook->>API: POST /entity/:id/like
    API->>DB: Toggle likes è¡¨
    DB-->>API: è¿”å›æ–°ç‹€æ…‹
    API-->>Hook: { liked: true, likes: 10 }
    Hook->>Cache: æ›´æ–°çœŸå¯¦æ•¸æ“š

    alt API å¤±æ•—
        API-->>Hook: Error
        Hook->>Cache: å›æ»¾åˆ°åŸç‹€æ…‹
        Hook->>UI: é¡¯ç¤ºéŒ¯èª¤æç¤º
    end
```

### ä»£ç¢¼é‡å°æ¯”åœ–

#### é‡æ§‹å‰ (1559 è¡Œ)

```
æ–‡ç« ç³»çµ±         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 330è¡Œ (21%)
äººç‰©èªŒä¸»é«”       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 478è¡Œ (31%)
ç« ç¯€å…§å®¹         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 398è¡Œ (26%)
äººç”Ÿæ¸…å–®         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 353è¡Œ (22%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç¸½è¨ˆ: 1559 è¡Œ
```

#### é‡æ§‹å¾Œ (770 è¡Œ)

```
UnifiedLikeButton      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 150è¡Œ (19%)
UnifiedBookmarkButton  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 120è¡Œ (16%)
UnifiedCommentSection  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 300è¡Œ (39%)
Hooks & Utils          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 200è¡Œ (26%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç¸½è¨ˆ: 770 è¡Œ (-789è¡Œ, -51%)
```

### ç¶­è­·æˆæœ¬å°æ¯”

| ä»»å‹™                 | é‡æ§‹å‰            | é‡æ§‹å¾Œ                    | æ•ˆç‡æå‡     |
| -------------------- | ----------------- | ------------------------- | ------------ |
| ä¿®æ”¹æŒ‰è®šé‚è¼¯         | 4 å€‹æª”æ¡ˆ          | 1 å€‹æª”æ¡ˆ                  | **4å€** â¬†ï¸   |
| ä¿®æ”¹ç•™è¨€ UI          | 4 å€‹æª”æ¡ˆ          | 1 å€‹æª”æ¡ˆ                  | **4å€** â¬†ï¸   |
| æ–°å¢æ”¶è—åŠŸèƒ½åˆ°äººç‰©èªŒ | 80 è¡Œ + æ¸¬è©¦      | `<UnifiedBookmarkButton>` | **10å€** â¬†ï¸  |
| æ–°å¢ Gallery äº’å‹•    | é‡å¯«ä¸€å¥— (~400è¡Œ) | 3 è¡Œ JSX                  | **100å€** â¬†ï¸ |
| ä¿®å¾©æŒ‰è®š bug         | æ¸¬è©¦ 4 è™•         | æ¸¬è©¦ 1 è™•                 | **4å€** â¬†ï¸   |
| Code review          | æª¢æŸ¥ 4 ç¨®å¯¦ä½œ     | æª¢æŸ¥ 1 ç¨®å¯¦ä½œ             | **4å€** â¬†ï¸   |

### å®Œæ•´ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ç”¨æˆ¶ç•Œé¢å±¤                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ–‡ç«     â”‚ â”‚ äººç‰©èªŒ   â”‚ â”‚æ ¸å¿ƒæ•…äº‹  â”‚ â”‚ äººç”Ÿæ¸…å–® â”‚ â”‚ Gallery/...  â”‚  â”‚
â”‚  â”‚  è©³æƒ…é   â”‚ â”‚ ä¸»é      â”‚ â”‚Chapters  â”‚ â”‚ Cards    â”‚ â”‚  (æœªä¾†)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚            â”‚            â”‚            â”‚              â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                 â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              çµ±ä¸€äº’å‹•çµ„ä»¶å±¤ (770 è¡Œ)                               â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  UnifiedLikeButton                                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - æ”¯æ´ 11 ç¨® entity_type                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - å¯é…ç½®åœ–æ¨™ (Heart/Mountain)                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - å¯é…ç½®é¡è‰² (Red/Emerald)                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - æ¨‚è§€æ›´æ–° + éŒ¯èª¤å›æ»¾                                       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  UnifiedBookmarkButton                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - æ”¯æ´ 6 ç¨® entity_type                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - å¯é…ç½®é¡è‰² (Brand/Yellow)                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - æ¨‚è§€æ›´æ–° + éŒ¯èª¤å›æ»¾                                       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  UnifiedCommentSection                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - æ”¯æ´ 11 ç¨® entity_type                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - å¯é…ç½®æ¨¡å¼ (Sheet/Inline/Embedded)                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - çµ±ä¸€çš„ç•™è¨€ CRUD                                           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â†“                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TanStack Query ç‹€æ…‹ç®¡ç†å±¤                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  useEntityLike(entityType, entityId)                                     â”‚
â”‚   â”œâ”€ queryKey: ['like-status', entityType, entityId]                    â”‚
â”‚   â”œâ”€ staleTime: 5 åˆ†é˜ (æ¸›å°‘ 30% API è«‹æ±‚)                              â”‚
â”‚   â””â”€ è‡ªå‹•èƒŒæ™¯é‡æ–°é©—è­‰                                                    â”‚
â”‚                                                                           â”‚
â”‚  useEntityLikeMutation(entityType, entityId)                             â”‚
â”‚   â”œâ”€ onMutate: æ¨‚è§€æ›´æ–° (< 50ms å³æ™‚å›é¥‹)                               â”‚
â”‚   â”œâ”€ onError: è‡ªå‹•å›æ»¾ + Toast éŒ¯èª¤æç¤º                                 â”‚
â”‚   â””â”€ onSuccess: æ›´æ–°å¿«å–ä¸­çš„çœŸå¯¦æ•¸æ“š                                    â”‚
â”‚                                                                           â”‚
â”‚  useEntityBookmark / useEntityComments (åŒä¸Šæ¶æ§‹)                        â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Service æ˜ å°„å±¤                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  getServiceByEntityType(entityType) {                                    â”‚
â”‚    'biography'         â†’ biographyService                                â”‚
â”‚    'post'              â†’ postService                                     â”‚
â”‚    'core-story'        â†’ biographyContentService                         â”‚
â”‚    'story'             â†’ biographyContentService                         â”‚
â”‚    'one-liner'         â†’ biographyContentService                         â”‚
â”‚    'bucket-list'       â†’ bucketListService                               â”‚
â”‚    'gallery'           â†’ galleryService      // æœªä¾†                     â”‚
â”‚    'video'             â†’ videoService        // æœªä¾†                     â”‚
â”‚    'gym'               â†’ gymService          // æœªä¾†                     â”‚
â”‚    'crag'              â†’ cragService         // æœªä¾†                     â”‚
â”‚    'route'             â†’ routeService        // æœªä¾†                     â”‚
â”‚  }                                                                        â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å¾Œç«¯ API å±¤                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  POST /posts/:id/like                                                    â”‚
â”‚  POST /biographies/:id/like                                              â”‚
â”‚  POST /core-stories/:id/like                                             â”‚
â”‚  POST /bucket-list/:id/like                                              â”‚
â”‚  POST /galleries/:id/like           // æœªä¾†                              â”‚
â”‚  ...                                                                      â”‚
â”‚                                                                           â”‚
â”‚  çµ±ä¸€çš„ Toggle æ¨¡å¼: { liked: boolean, likes: number }                  â”‚
â”‚  çµ±ä¸€çš„é€šçŸ¥ç³»çµ±æ•´åˆ                                                       â”‚
â”‚  çµ±ä¸€çš„æ¬Šé™æª¢æŸ¥ (authMiddleware)                                         â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         è³‡æ–™åº«å±¤ (D1)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  likes è¡¨                                                          â”‚  â”‚
â”‚  â”‚  - entity_type: 'biography' | 'post' | 'core_story' | ... (11ç¨®) â”‚  â”‚
â”‚  â”‚  - entity_id: string                                              â”‚  â”‚
â”‚  â”‚  - user_id: string                                                â”‚  â”‚
â”‚  â”‚  - UNIQUE(user_id, entity_type, entity_id)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  bookmarks è¡¨                                                      â”‚  â”‚
â”‚  â”‚  - entity_type: 'post' | 'gallery' | 'video' | ... (6ç¨®)         â”‚  â”‚
â”‚  â”‚  - entity_id: string                                              â”‚  â”‚
â”‚  â”‚  - user_id: string                                                â”‚  â”‚
â”‚  â”‚  - UNIQUE(user_id, entity_type, entity_id)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  comments è¡¨                                                       â”‚  â”‚
â”‚  â”‚  - entity_type: 'biography' | 'post' | ... (11ç¨®)                â”‚  â”‚
â”‚  â”‚  - entity_id: string                                              â”‚  â”‚
â”‚  â”‚  - user_id: string                                                â”‚  â”‚
â”‚  â”‚  - content: TEXT                                                  â”‚  â”‚
â”‚  â”‚  - parent_id: TEXT (æ”¯æ´åµŒå¥—ç•™è¨€)                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  âœ… çµ±ä¸€çš„è³‡æ–™çµæ§‹                                                        â”‚
â”‚  âœ… é€šé entity_type å€åˆ†ä¸åŒå…§å®¹é¡å‹                                    â”‚
â”‚  âœ… æ”¯æ´ 11 ç¨®å…§å®¹é¡å‹çš„äº’å‹•                                             â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    ã€é—œéµè¨­è¨ˆæ±ºç­–ã€‘

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  1. è³‡æ–™åº«çµ±ä¸€è¨­è¨ˆ âœ…                           â”‚
    â”‚     â†’ é€šé entity_type å€åˆ†å…§å®¹é¡å‹            â”‚
    â”‚                                                 â”‚
    â”‚  2. å¾Œç«¯ API çµ±ä¸€æ ¼å¼ âœ…                        â”‚
    â”‚     â†’ Toggle æ¨¡å¼,è¿”å›çµ±ä¸€æ ¼å¼                 â”‚
    â”‚                                                 â”‚
    â”‚  3. å‰ç«¯éœ€è¦çµ±ä¸€ âš ï¸ (ç•¶å‰å•é¡Œ)                  â”‚
    â”‚     â†’ 4 å¥—å¯¦ä½œ â†’ çµ±ä¸€çµ„ä»¶ç³»çµ±                  â”‚
    â”‚                                                 â”‚
    â”‚  4. TanStack Query ç®¡ç†ç‹€æ…‹ âœ…                  â”‚
    â”‚     â†’ å¿«å– + æ¨‚è§€æ›´æ–° + éŒ¯èª¤å›æ»¾               â”‚
    â”‚                                                 â”‚
    â”‚  5. å¯é…ç½®çš„ UI âœ…                              â”‚
    â”‚     â†’ æ ¹æ“š entityType è‡ªå‹•é¸æ“‡åœ–æ¨™/é¡è‰²/æ¨¡å¼  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››å¥—å¯¦ä½œæ–¹å¼è©³ç´°åˆ†æ

### ç³»çµ± 1: äººç‰©èªŒä¸»é«”äº’å‹•

#### çµ„ä»¶

- **æŒ‰è®š**: `BiographyLikeButton` (`src/components/biography/biography-like-button.tsx`)
- **ç•™è¨€**: `BiographyCommentSection` (`src/components/biography/biography-comment-section.tsx`)

#### ä½¿ç”¨ä½ç½®

- `HeroSection` - äººç‰©èªŒè©³æƒ…é é ‚éƒ¨
- `BiographyHero` - V2 å±•ç¤ºçµ„ä»¶

#### æŠ€è¡“ç‰¹å¾µ

**BiographyLikeButton**:

```typescript
// ç¬¬ 92 è¡Œ
<Mountain className={cn('h-4 w-4', isLiked && 'fill-current')} />

// ç¬¬ 84-86 è¡Œ
className={cn(
  'inline-flex items-center gap-1 text-sm text-gray-500 hover:text-emerald-600',
  isLiked && 'text-emerald-600',  // ğŸŸ¢ ç¶ è‰²
)}
```

**BiographyCommentSection**:

```typescript
// æ”¯æ´å…©ç¨®æ¨¡å¼
isEmbedded={true}   // åµŒå…¥å¼ (ç›´æ¥å±•é–‹)
isEmbedded={false}  // æµ®å±¤æ¨¡å¼ (ç¬¬ 275-377 è¡Œ)
```

#### ç‰¹é»ç¸½çµ

| ç‰¹æ€§     | å¯¦ä½œ                                             |
| -------- | ------------------------------------------------ |
| æŒ‰è®šåœ–æ¨™ | `Mountain` (å±±å³°)                                |
| æŒ‰è®šé¡è‰² | `text-emerald-600` (ç¶ è‰²)                        |
| ç•™è¨€ UI  | åµŒå…¥å¼ / æµ®å±¤ (absolute positioning)             |
| API      | `biographyService.toggleLike()`, `getComments()` |
| ç‹€æ…‹ç®¡ç† | `useState`                                       |
| åˆå§‹åŒ–   | `useEffect` è‡ªå‹•ç²å–æŒ‰è®šç‹€æ…‹ (ç¬¬ 35-53 è¡Œ)       |
| æ¨‚è§€æ›´æ–° | âŒ ç„¡                                            |
| éŒ¯èª¤è™•ç† | Toast é€šçŸ¥                                       |

#### ç¨‹å¼ç¢¼è¡Œæ•¸

- BiographyLikeButton: **98 è¡Œ**
- BiographyCommentSection: **380 è¡Œ**
- **ç¸½è¨ˆ**: 478 è¡Œ

---

### ç³»çµ± 2: ç« ç¯€å…§å®¹äº’å‹•

#### çµ„ä»¶

- **æŒ‰è®š**: `ContentLikeButton` (`src/components/biography/display/ContentLikeButton.tsx`)
- **ç•™è¨€**: `ContentCommentSheet` (`src/components/biography/display/ContentCommentSheet.tsx`)

#### ä½¿ç”¨ä½ç½®

- `ChapterMeeting` - ç›¸é‡ç¯‡ (Chapter 1)
- `ChapterMeaning` - æ„ç¾©ç¯‡ (Chapter 2)
- `ChapterAdvice` - çµ¦è‡ªå·±çš„è©± (Chapter 4)
- `BiographyStories` - å°æ•…äº‹
- `BiographyOneLiners` - ä¸€å¥è©±ç³»åˆ—
- `BiographyCoreStories` - æ ¸å¿ƒæ•…äº‹é€šç”¨é¡¯ç¤º

#### æŠ€è¡“ç‰¹å¾µ

**ContentLikeButton**:

```typescript
// ç¬¬ 97-100 è¡Œ
<Heart size={iconSize} className={cn(liked && 'fill-current')} />

// æ¨‚è§€æ›´æ–°å¯¦ä½œ (ç¬¬ 54-74 è¡Œ)
setLiked(!liked)  // ç«‹å³æ›´æ–° UI
setCount(liked ? count - 1 : count + 1)

try {
  const result = await onToggle()
  // æˆåŠŸå¾Œä½¿ç”¨ API å›å‚³å€¼
  setLiked(result.liked)
  setCount(result.like_count)
} catch (error) {
  // å¤±æ•—æ™‚å›æ»¾
  setLiked(liked)
  setCount(count)
  toast({ title: 'æ“ä½œå¤±æ•—', variant: 'destructive' })
}
```

**ContentCommentSheet**:

```typescript
// ä½¿ç”¨ Radix UI Sheet çµ„ä»¶ (å´é‚Šæ¬„)
<Sheet open={isOpen} onOpenChange={setIsOpen}>
  <SheetTrigger asChild>
    <button>...</button>
  </SheetTrigger>
  <SheetContent side="right" className="flex flex-col">
    {/* ç•™è¨€å…§å®¹ */}
  </SheetContent>
</Sheet>
```

#### ç‰¹é»ç¸½çµ

| ç‰¹æ€§     | å¯¦ä½œ                                                     |
| -------- | -------------------------------------------------------- |
| æŒ‰è®šåœ–æ¨™ | `Heart` (æ„›å¿ƒ) âŒ **éŒ¯èª¤ - æ‡‰ç‚º Mountain**               |
| æŒ‰è®šé¡è‰² | `text-red-500` (ç´…è‰²) âŒ **éŒ¯èª¤ - æ‡‰ç‚º emerald-600**     |
| ç•™è¨€ UI  | Sheet å´é‚Šæ¬„ (Radix UI)                                  |
| API      | ç”±å¤–éƒ¨å‚³å…¥çš„ callback                                    |
| ç‹€æ…‹ç®¡ç† | TanStack Query (Chapters) / useState (Stories/OneLiners) |
| æ¨‚è§€æ›´æ–° | âœ… æœ‰ (ContentLikeButton å…§éƒ¨å¯¦ä½œ + Rollback)            |
| éŒ¯èª¤è™•ç† | Toast é€šçŸ¥ + æ¨‚è§€æ›´æ–°å›æ»¾                                |

**è¨­è¨ˆè¦ç¯„é•å**: ContentLikeButton ä½¿ç”¨äº† Heart åœ–æ¨™å’Œç´…è‰²ï¼Œä¸ç¬¦åˆå°ˆæ¡ˆçµ±ä¸€ä½¿ç”¨ Mountain + ç¶ è‰²çš„è¨­è¨ˆè¦ç¯„ã€‚

#### Hooks æ”¯æ´ (TanStack Query)

```typescript
// src/lib/hooks/useCoreStories.ts
useCoreStoryLikeMutation(biographyId)
useCoreStoryCommentMutation(biographyId, storyId)

// å¿«å–ç­–ç•¥
staleTime: 1000 * 60 * 5,  // 5 åˆ†é˜
gcTime: 1000 * 60 * 30,     // 30 åˆ†é˜

// æ¨‚è§€æ›´æ–° (ç¬¬ 87-97 è¡Œ)
onSuccess: (data, storyId) => {
  queryClient.setQueryData(['coreStories', biographyId], (oldStories) => {
    return oldStories.map((story) =>
      story.id === storyId
        ? { ...story, is_liked: data.liked, like_count: data.like_count }
        : story
    )
  })
}
```

#### ç¨‹å¼ç¢¼è¡Œæ•¸

- ContentLikeButton: **118 è¡Œ**
- ContentCommentSheet: **280 è¡Œ**
- **ç¸½è¨ˆ**: 398 è¡Œ

---

### ç³»çµ± 3: äººç”Ÿæ¸…å–®äº’å‹•

#### çµ„ä»¶

- **æŒ‰è®š**: `LikeButton` (`src/components/biography/like-button.tsx`)
- **ç•™è¨€**: `CommentSection` (`src/components/biography/comment-section.tsx`)

#### ä½¿ç”¨ä½ç½®

- `BucketListCard` - äººç”Ÿæ¸…å–®å¡ç‰‡
- `ChapterBucketList` - é€é `CompletedBucketListCard`

#### æŠ€è¡“ç‰¹å¾µ

**LikeButton**:

```typescript
// æ”¯æ´å…©ç¨®è®Šé«”
variant?: 'button' | 'icon'

// Icon è®Šé«” (ç¬¬ 77-97 è¡Œ)
<Mountain className={cn('h-4 w-4', isLiked && 'fill-current')} />
hover:text-red-500  // âŒ éŒ¯èª¤ - æ‡‰ç‚º emerald-600
isLiked && 'text-red-500'  // âŒ éŒ¯èª¤ - æ‡‰ç‚º emerald-600

// Button è®Šé«” (ç¬¬ 100-119 è¡Œ)
<Button variant={isLiked ? 'secondary' : 'ghost'}>
  <Mountain ... />
</Button>
```

**CommentSection**:

```typescript
// å¡ç‰‡å…§å±•é–‹æ¨¡å¼ (ç¬¬ 139-228 è¡Œ)
{isOpen && (
  <div className="space-y-4 mt-4 border-t pt-4">
    {/* ç•™è¨€å…§å®¹ç›´æ¥åœ¨å¡ç‰‡ä¸‹æ–¹å±•é–‹ */}
  </div>
)}
```

#### ç‰¹é»ç¸½çµ

| ç‰¹æ€§     | å¯¦ä½œ                                                            |
| -------- | --------------------------------------------------------------- |
| æŒ‰è®šåœ–æ¨™ | `Mountain` (å±±å³°) âœ…                                            |
| æŒ‰è®šé¡è‰² | `text-red-500` (ç´…è‰²) âŒ **éŒ¯èª¤ - æ‡‰ç‚º emerald-600**            |
| ç•™è¨€ UI  | å¡ç‰‡å…§å±•é–‹ (inline)                                             |
| API      | `bucketListService.likeItem()`, `unlikeItem()`, `getComments()` |
| ç‹€æ…‹ç®¡ç† | `useState`                                                      |
| æ¨‚è§€æ›´æ–° | âŒ ç„¡ (ä½†æœ‰å³æ™‚æ›´æ–°)                                            |
| éŒ¯èª¤è™•ç† | Toast é€šçŸ¥                                                      |
| ç‰¹æ®ŠåŠŸèƒ½ | æ”¯æ´ button/icon å…©ç¨®è®Šé«”                                       |

**è¨­è¨ˆè¦ç¯„é•å**: LikeButton ä½¿ç”¨äº†ç´…è‰²ï¼Œä¸ç¬¦åˆå°ˆæ¡ˆçµ±ä¸€ä½¿ç”¨ç¶ è‰² (emerald-600) çš„è¨­è¨ˆè¦ç¯„ã€‚

#### ç¨‹å¼ç¢¼è¡Œæ•¸

- LikeButton: **121 è¡Œ**
- CommentSection: **232 è¡Œ**
- **ç¸½è¨ˆ**: 353 è¡Œ

---

### ç³»çµ± 4: æ–‡ç« äº’å‹• (å…§è¯å¯¦ä½œ)

#### çµ„ä»¶

- **æŒ‰è®š/æ”¶è—**: ç›´æ¥åœ¨é é¢çµ„ä»¶ä¸­å¯¦ä½œ (ç„¡ç¨ç«‹çµ„ä»¶)
- **ç•™è¨€**: `CommentSection` (`src/components/blog/CommentSection.tsx`) - **èˆ‡ç³»çµ±3ä¸åŒçš„æª”æ¡ˆ!**

#### ä½¿ç”¨ä½ç½®

- `BlogDetailClient` - æ–‡ç« è©³æƒ…é  (`src/app/blog/[id]/BlogDetailClient.tsx`)

#### æŠ€è¡“ç‰¹å¾µ

**å…§è¯æŒ‰è®š/æ”¶è—å¯¦ä½œ**:

```typescript
// BlogDetailClient.tsx è¡Œ 46-51
const [isLiked, setIsLiked] = useState(false)
const [likeCount, setLikeCount] = useState(0)
const [isBookmarked, setIsBookmarked] = useState(false)
const [bookmarkCount, setBookmarkCount] = useState(0)
const [isLiking, setIsLiking] = useState(false)
const [isBookmarking, setIsBookmarking] = useState(false)

// é€šç”¨çš„ Toggle Handler (è¡Œ 151-164)
const createToggleHandler = (
  isLoading: boolean,
  setLoading: React.Dispatch<React.SetStateAction<boolean>>,
  apiCall: () => Promise<ApiResponse<any>>,
  onSuccess: (data: any) => void,
  getSuccessMessage: (data: any) => string
) => {
  return async () => {
    if (!isAuthenticated) { router.push('/auth/login'); return }
    if (isLoading) return
    setLoading(true)
    try {
      const response = await apiCall()
      if (response.success && response.data) {
        onSuccess(response.data)
        toast({ title: getSuccessMessage(response.data) })
      }
    } catch (error) { /* éŒ¯èª¤è™•ç† */ }
    finally { setLoading(false) }
  }
}

// æŒ‰è®šè™•ç†å™¨ (è¡Œ 169-178)
const handleLike = createToggleHandler(
  isLiking, setIsLiking,
  () => postService.toggleLike(id),
  (data: { liked: boolean; likes: number }) => {
    setIsLiked(data.liked)
    setLikeCount(data.likes)
  },
  (data) => (data.liked ? 'å·²æŒ‰è®š' : 'å·²å–æ¶ˆæŒ‰è®š')
)

// æ”¶è—è™•ç†å™¨ (è¡Œ 181-190)
const handleBookmark = createToggleHandler(
  isBookmarking, setIsBookmarking,
  () => postService.toggleBookmark(id),
  (data: { bookmarked: boolean; bookmarks: number }) => {
    setIsBookmarked(data.bookmarked)
    setBookmarkCount(data.bookmarks)
  },
  (data) => (data.bookmarked ? 'å·²æ”¶è—' : 'å·²å–æ¶ˆæ”¶è—')
)

// UI æ¸²æŸ“ (è¡Œ 268-290)
<button onClick={handleLike} disabled={isLiking}
  className={isLiked ? 'text-emerald-600' : 'text-wb-70'}>
  <Mountain size={14} className={isLiked ? 'fill-emerald-600' : ''} />
  {likeCount > 0 && likeCount}
</button>

<button onClick={handleBookmark} disabled={isBookmarking}
  className={isBookmarked ? 'text-brand-accent-hover' : 'text-wb-70'}>
  <Bookmark size={14} className={isBookmarked ? 'fill-brand-accent-hover' : ''} />
  {bookmarkCount > 0 && bookmarkCount}
</button>
```

**BlogCommentSection** (ä¸åŒæ–¼ BucketList çš„ CommentSection!):

```typescript
// src/components/blog/CommentSection.tsx
export function CommentSection({ postId }: { postId: string }) {
  const [comments, setComments] = useState<Comment[]>([])
  const [content, setContent] = useState('')
  const [isSubmitting, setIsSubmitting] = useState(false)

  // è¼‰å…¥ç•™è¨€
  useEffect(() => {
    loadComments()
  }, [postId])

  const loadComments = async () => {
    const response = await postService.getComments(postId)
    if (response.success && response.data) {
      setComments(response.data)
    }
  }

  // æ–°å¢ç•™è¨€
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    // ... èˆ‡å…¶ä»– CommentSection é¡ä¼¼çš„é‚è¼¯
  }

  // åˆªé™¤ç•™è¨€
  const handleDelete = async (commentId: string) => {
    await postService.deleteComment(postId, commentId)
    setComments(comments.filter((c) => c.id !== commentId))
  }

  // ... æ¸²æŸ“ç•™è¨€åˆ—è¡¨
}
```

#### ç‰¹é»ç¸½çµ

| ç‰¹æ€§     | å¯¦ä½œ                                                            |
| -------- | --------------------------------------------------------------- |
| æŒ‰è®šåœ–æ¨™ | `Mountain` (å±±å³°)                                               |
| æŒ‰è®šé¡è‰² | `text-emerald-600` (ç¶ è‰²)                                       |
| æ”¶è—åœ–æ¨™ | `Bookmark` (æ›¸ç±¤)                                               |
| æ”¶è—é¡è‰² | `text-brand-accent-hover` (å“ç‰Œè‰²)                              |
| ç•™è¨€ UI  | å¡ç‰‡å…§å±•é–‹ (inline)                                             |
| çµ„ä»¶å°è£ | âŒ ç„¡ç¨ç«‹çµ„ä»¶,ç›´æ¥åœ¨é é¢ä¸­å¯¦ä½œ                                  |
| API      | `postService.toggleLike()`, `toggleBookmark()`, `getComments()` |
| ç‹€æ…‹ç®¡ç† | `useState`                                                      |
| æ¨‚è§€æ›´æ–° | âŒ ç„¡                                                           |
| éŒ¯èª¤è™•ç† | Toast é€šçŸ¥                                                      |
| ç‰¹æ®ŠåŠŸèƒ½ | âœ… **æ”¶è—åŠŸèƒ½** (å…¶ä»–ç³»çµ±æ²’æœ‰)                                  |

#### ç¨‹å¼ç¢¼è¡Œæ•¸

- æŒ‰è®š/æ”¶è—é‚è¼¯ (BlogDetailClient ä¸­): **ç´„ 80 è¡Œ**
- CommentSection: **ç´„ 250 è¡Œ**
- **ç¸½è¨ˆ**: ç´„ 330 è¡Œ

#### èˆ‡ç³»çµ± 3 çš„é‡è¦å·®ç•°

é›–ç„¶éƒ½å« `CommentSection`,ä½†æ˜¯**å®Œå…¨ä¸åŒçš„æª”æ¡ˆ**:

- ç³»çµ± 3: `/src/components/biography/comment-section.tsx` (Bucket List ç”¨)
- ç³»çµ± 4: `/src/components/blog/CommentSection.tsx` (æ–‡ç« ç”¨)

å…©è€…ç¨‹å¼ç¢¼ç´„ 85% ç›¸ä¼¼,ä½† API èª¿ç”¨ä¸åŒ:

- ç³»çµ± 3: `bucketListService.getComments()`, `addComment()`, `deleteComment()`
- ç³»çµ± 4: `postService.getComments()`, `addComment()`, `deleteComment(postId, commentId)`

---

## å•é¡Œå½™ç¸½

### 1. é‡è¤‡ä»£ç¢¼

| çµ„ä»¶å°æ¯”                                                                  | é‡è¤‡ç¨‹åº¦    | èªªæ˜                                       |
| ------------------------------------------------------------------------- | ----------- | ------------------------------------------ |
| BiographyCommentSection vs BucketListCommentSection vs BlogCommentSection | 90% ç›¸ä¼¼    | ä¸‰å€‹å¹¾ä¹å®Œå…¨ç›¸åŒçš„ç•™è¨€çµ„ä»¶,åƒ… API èª¿ç”¨ä¸åŒ |
| BiographyLikeButton vs ContentLikeButton vs LikeButton                    | 80% ç›¸ä¼¼    | æ ¸å¿ƒé‚è¼¯ç›¸åŒ,åƒ…åœ–æ¨™å’Œé¡è‰²ä¸åŒ              |
| BlogDetailClient çš„æŒ‰è®š/æ”¶è—é‚è¼¯                                          | 100% å¯æŠ½å– | å¯æŠ½å–ç‚ºå…±ç”¨çµ„ä»¶ä½†ç›®å‰æœªæŠ½å–               |

#### ç¨‹å¼ç¢¼è¡Œæ•¸çµ±è¨ˆ

| ç³»çµ±               | æŒ‰è®šçµ„ä»¶     | ç•™è¨€çµ„ä»¶    | ç¸½è¨ˆ        |
| ------------------ | ------------ | ----------- | ----------- |
| ç³»çµ± 1: äººç‰©èªŒä¸»é«” | 98 è¡Œ        | 380 è¡Œ      | **478 è¡Œ**  |
| ç³»çµ± 2: ç« ç¯€å…§å®¹   | 118 è¡Œ       | 280 è¡Œ      | **398 è¡Œ**  |
| ç³»çµ± 3: äººç”Ÿæ¸…å–®   | 121 è¡Œ       | 232 è¡Œ      | **353 è¡Œ**  |
| ç³»çµ± 4: æ–‡ç«        | 80 è¡Œ (å…§è¯) | 250 è¡Œ      | **330 è¡Œ**  |
| **ç¸½è¨ˆ**           | **417 è¡Œ**   | **1142 è¡Œ** | **1559 è¡Œ** |

**é‡è¤‡ä»£ç¢¼é‡**: ç´„ **1000+ è¡Œ**é‡è¤‡æˆ–é«˜åº¦ç›¸ä¼¼çš„ä»£ç¢¼

#### é‡è¤‡æ¨¡å¼åˆ†æ

**ç•™è¨€çµ„ä»¶é‡è¤‡æ¨¡å¼**:

```typescript
// æ‰€æœ‰ç•™è¨€çµ„ä»¶éƒ½æœ‰ç›¸åŒçš„çµæ§‹:
1. useState(comments, isLoading, content)
2. loadComments() å‡½æ•¸
3. handleSubmit() å‡½æ•¸
4. handleDelete() å‡½æ•¸
5. formatTime() å‡½æ•¸
6. getDisplayName() å‡½æ•¸
7. ç›¸åŒçš„ UI æ¸²æŸ“é‚è¼¯
```

å”¯ä¸€çš„å·®ç•°:

- API èª¿ç”¨ä¸åŒ (`biographyService` vs `bucketListService` vs `postService`)
- æŸäº›çµ„ä»¶æœ‰ `isEmbedded` æ¨¡å¼

### 2. UI/UX ä¸ä¸€è‡´

#### æŒ‰è®šåœ–æ¨™å’Œé¡è‰²

| ç³»çµ±       | åœ–æ¨™         | å·²æŒ‰è®šé¡è‰²                | Hover é¡è‰²               | çµ„ä»¶å°è£             | ç¬¦åˆè¦ç¯„    |
| ---------- | ------------ | ------------------------- | ------------------------ | -------------------- | ----------- |
| äººç‰©èªŒä¸»é«” | Mountain     | `text-emerald-600` ğŸŸ¢     | `hover:text-emerald-600` | BiographyLikeButton  | âœ…          |
| ç« ç¯€å…§å®¹   | **Heart** âš ï¸ | **`text-red-500` ğŸ”´**     | ç„¡ç‰¹æ®Š hover             | ContentLikeButton    | âŒ éŒ¯èª¤å¯¦ä½œ |
| äººç”Ÿæ¸…å–®   | Mountain     | **`text-red-500` ğŸ”´**     | `hover:text-red-500`     | LikeButton           | âš ï¸ é¡è‰²éŒ¯èª¤ |
| **æ–‡ç« **   | **Mountain** | **`text-emerald-600` ğŸŸ¢** | ç„¡ç‰¹æ®Š hover             | **âŒ ç„¡çµ„ä»¶ (å…§è¯)** | âœ…          |

**è¨­è¨ˆè¦ç¯„**: æ•´å€‹å°ˆæ¡ˆæ‡‰çµ±ä¸€ä½¿ç”¨ **Mountain åœ–æ¨™ + ç¶ è‰² (emerald-600)**

**å•é¡Œ**:

- âŒ **ContentLikeButton ä½¿ç”¨ Heart + ç´…è‰²** - é•åè¨­è¨ˆè¦ç¯„ï¼Œæ‡‰æ”¹ç‚º Mountain + ç¶ è‰²
- âŒ **LikeButton ä½¿ç”¨ç´…è‰²** - åœ–æ¨™æ­£ç¢ºä½†é¡è‰²éŒ¯èª¤ï¼Œæ‡‰æ”¹ç‚ºç¶ è‰²
- âŒ æ–‡ç« ç³»çµ±æ²’æœ‰ç¨ç«‹çµ„ä»¶,ä»£ç¢¼ç„¡æ³•é‡ç”¨
- âŒ ç¼ºä¹çµ±ä¸€çš„è¨­è¨ˆèªè¨€å’Œè¨­è¨ˆæ±ºç­–æ–‡ä»¶
- âš ï¸ 4 å¥—ç³»çµ±ä¸­åªæœ‰ 2 å¥—ç¬¦åˆè¨­è¨ˆè¦ç¯„ (50% ç¬¦åˆç‡)

#### æ”¶è—åŠŸèƒ½

| ç³»çµ±       | æ˜¯å¦æ”¯æ´æ”¶è— | å¯¦ä½œæ–¹å¼                     |
| ---------- | ------------ | ---------------------------- |
| äººç‰©èªŒä¸»é«” | âŒ ç„¡        | -                            |
| ç« ç¯€å…§å®¹   | âŒ ç„¡        | -                            |
| äººç”Ÿæ¸…å–®   | âŒ ç„¡        | -                            |
| **æ–‡ç« **   | **âœ… æœ‰**    | **å…§è¯å¯¦ä½œ (Bookmark åœ–æ¨™)** |

**å•é¡Œ**:

- ç‚ºä½•åªæœ‰æ–‡ç« æœ‰æ”¶è—åŠŸèƒ½?
- å…¶ä»–å…§å®¹é¡å‹ (äººç‰©èªŒã€äººç”Ÿæ¸…å–®) ä¸éœ€è¦æ”¶è—å—?
- æ”¶è—é‚è¼¯å®Œå…¨å…§è¯,ç„¡æ³•é‡ç”¨åˆ°å…¶ä»–åœ°æ–¹

#### ç•™è¨€ UI æ¨¡å¼

| ç³»çµ±       | å±•ç¤ºæ–¹å¼       | æŠ€è¡“å¯¦ä½œ             | ç”¨æˆ¶é«”é©—          | çµ„ä»¶è·¯å¾‘                                    |
| ---------- | -------------- | -------------------- | ----------------- | ------------------------------------------- |
| äººç‰©èªŒä¸»é«” | åµŒå…¥å¼ / æµ®å±¤  | absolute positioning | æµ®å±¤å¯èƒ½è¢«é®æ“‹    | `biography/biography-comment-section.tsx`   |
| ç« ç¯€å…§å®¹   | Sheet å´é‚Šæ¬„   | Radix UI Sheet       | å°ˆæ¥­,ä½†éœ€é¡å¤–é»æ“Š | `biography/display/ContentCommentSheet.tsx` |
| äººç”Ÿæ¸…å–®   | å¡ç‰‡å…§å±•é–‹     | inline div           | ç°¡å–®,ä½†ä½”ç”¨ç©ºé–“   | `biography/comment-section.tsx`             |
| **æ–‡ç« **   | **å¡ç‰‡å…§å±•é–‹** | **inline div**       | ç°¡å–®,ä½†ä½”ç”¨ç©ºé–“   | **`blog/CommentSection.tsx`**               |

**å•é¡Œ**:

- å››ç¨®ä¸åŒçš„å¯¦ä½œ,ä½†åªæœ‰å…©ç¨® UI æ¨¡å¼ (Sheet vs Inline)
- äººç”Ÿæ¸…å–®å’Œæ–‡ç« çš„ç•™è¨€ UI ç›¸åŒ,ä½†ç¨‹å¼ç¢¼åˆ†åˆ¥åœ¨ä¸åŒæª”æ¡ˆ,ç„¡æ³•å…±ç”¨
- æ²’æœ‰æ˜ç¢ºçš„ä½¿ç”¨å ´æ™¯å€åˆ†æ¨™æº–

### 3. æ•ˆèƒ½ä¸ä¸€è‡´

| ç³»çµ±                | å¿«å–æ©Ÿåˆ¶                 | æ¨‚è§€æ›´æ–°       | éŒ¯èª¤å›æ»¾  | ç‹€æ…‹ç®¡ç†       |
| ------------------- | ------------------------ | -------------- | --------- | -------------- |
| äººç‰©èªŒä¸»é«”          | âŒ ç„¡                    | âŒ ç„¡          | âŒ ç„¡     | useState       |
| ç« ç¯€å…§å®¹ (Chapters) | âœ… TanStack Query (5min) | âœ… æœ‰          | âœ… æœ‰     | TanStack Query |
| ç« ç¯€å…§å®¹ (Stories)  | âŒ ç„¡                    | âœ… æœ‰ (åƒ…æŒ‰è®š) | âœ… æœ‰     | useState       |
| äººç”Ÿæ¸…å–®            | âŒ ç„¡                    | âŒ ç„¡          | âŒ ç„¡     | useState       |
| **æ–‡ç« **            | **âŒ ç„¡**                | **âŒ ç„¡**      | **âŒ ç„¡** | **useState**   |

**å•é¡Œ**:

- ç”¨æˆ¶åœ¨ä¸åŒé é¢é«”é©—åˆ°ä¸åŒçš„äº’å‹•é€Ÿåº¦
- éƒ¨åˆ†åŠŸèƒ½æœ‰å¿«å–,éƒ¨åˆ†æ²’æœ‰,å¢åŠ ä¼ºæœå™¨è² æ“”
- åªæœ‰ Chapters æœ‰å®Œæ•´çš„å¿«å–å’Œæ¨‚è§€æ›´æ–°æ©Ÿåˆ¶
- æ–‡ç« æŒ‰è®šæ¯æ¬¡éƒ½éœ€è¦ç­‰å¾… API å›æ‡‰,é«”é©—è¼ƒå·®

### 4. ç¶­è­·æˆæœ¬

ç•¶éœ€è¦ä¿®æ”¹äº’å‹•åŠŸèƒ½æ™‚ (ä¾‹å¦‚:æ–°å¢ã€Œåˆ†äº«ã€åŠŸèƒ½):

| ä»»å‹™            | ç¾ç‹€                            | ç†æƒ³ç‹€æ…‹     |
| --------------- | ------------------------------- | ------------ |
| ä¿®æ”¹æŒ‰è®šé‚è¼¯    | éœ€æ”¹ 4 è™• (3 å€‹çµ„ä»¶ + 1 è™•å…§è¯) | æ”¹ 1 å€‹çµ„ä»¶  |
| æ–°å¢åŠŸèƒ½ (åˆ†äº«) | éœ€å¯« 4 å¥—å¯¦ä½œ                   | é…ç½®å³å¯     |
| ä¿®å¾© bug (ç•™è¨€) | éœ€åœ¨ 4 å€‹æª”æ¡ˆä¸­ä¿®å¾©             | ä¿®å¾© 1 è™•    |
| å–®å…ƒæ¸¬è©¦        | éœ€å¯« 4 å¥—æ¸¬è©¦                   | å¯« 1 å¥—æ¸¬è©¦  |
| æ·»åŠ æ¨‚è§€æ›´æ–°    | éœ€åœ¨ 4 è™•åˆ†åˆ¥å¯¦ä½œ               | çµ±ä¸€é…ç½®å³å¯ |
| ä¿®æ”¹åœ–æ¨™/é¡è‰²   | éœ€æ‰¾å‡ºæ‰€æœ‰ä½¿ç”¨ä½ç½®ä¿®æ”¹          | ä¿®æ”¹ä¸»é¡Œé…ç½® |

**å¯¦éš›æ¡ˆä¾‹: æ–‡ç« æ”¶è—åŠŸèƒ½**

æ–‡ç« ç³»çµ±å·²ç¶“æœ‰æ”¶è—åŠŸèƒ½,ä½†å¦‚æœè¦åœ¨å…¶ä»–åœ°æ–¹åŠ å…¥:

| æ“ä½œ           | ç¾ç‹€ (è¤‡è£½è²¼ä¸Š)                 | ç†æƒ³ç‹€æ…‹ (çµ±ä¸€çµ„ä»¶)            |
| -------------- | ------------------------------- | ------------------------------ |
| äººç‰©èªŒåŠ æ”¶è—   | è¤‡è£½æ–‡ç« çš„ 80 è¡Œä»£ç¢¼ + ä¿®æ”¹ API | åŠ å…¥ `<UnifiedBookmarkButton>` |
| äººç”Ÿæ¸…å–®åŠ æ”¶è— | å†è¤‡è£½ 80 è¡Œä»£ç¢¼ + ä¿®æ”¹ API     | åŠ å…¥ `<UnifiedBookmarkButton>` |
| æ¸¬è©¦           | éœ€æ¸¬è©¦ 3 å€‹ç¨ç«‹å¯¦ä½œ             | æ¸¬è©¦ 1 å€‹çµ„ä»¶                  |
| ç¶­è­·           | æ”¹å‹•éœ€åŒæ­¥ 3 è™•                 | æ”¹å‹• 1 è™•                      |

### 5. è³‡æ–™åº«è¨­è¨ˆå°æ¯”

é›–ç„¶å››å¥—ç³»çµ±å¯¦ä½œä¸åŒ,ä½†**è³‡æ–™åº«è¨­è¨ˆæ˜¯å®Œå…¨çµ±ä¸€çš„**:

```sql
-- çµ±ä¸€çš„ likes è¡¨ (æ”¯æ´ 11 ç¨®å¯¦é«”é¡å‹)
CREATE TABLE likes (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  entity_type TEXT CHECK (entity_type IN (
    'biography', 'post', 'bucket_list_item',
    'core_story', 'one_liner', 'story',
    'gallery', 'video', 'gym', 'crag', 'route'
  )),
  entity_id TEXT NOT NULL,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE (user_id, entity_type, entity_id),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- çµ±ä¸€çš„ bookmarks è¡¨ (æ”¯æ´ 6 ç¨®å¯¦é«”é¡å‹)
CREATE TABLE bookmarks (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  entity_type TEXT CHECK (entity_type IN (
    'post', 'gallery', 'video', 'gym', 'crag', 'biography'
  )),
  entity_id TEXT NOT NULL,
  created_at TEXT DEFAULT (datetime('now')),
  UNIQUE (user_id, entity_type, entity_id),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- çµ±ä¸€çš„ comments è¡¨ (æ”¯æ´ 11 ç¨®å¯¦é«”é¡å‹)
CREATE TABLE comments (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  entity_type TEXT CHECK (entity_type IN (
    'biography', 'post', 'bucket_list_item',
    'core_story', 'one_liner', 'story',
    'gallery', 'video', 'gym', 'crag', 'route'
  )),
  entity_id TEXT NOT NULL,
  content TEXT NOT NULL,
  parent_id TEXT,  -- æ”¯æ´åµŒå¥—ç•™è¨€
  created_at TEXT DEFAULT (datetime('now')),
  ...
);
```

#### entity_type æ”¯æ´åˆ—è¡¨

| Entity Type      | ä¸­æ–‡åç¨± | æŒ‰è®š | æ”¶è— | ç•™è¨€ | å‰ç«¯å¯¦ä½œç‹€æ…‹      |
| ---------------- | -------- | ---- | ---- | ---- | ----------------- |
| biography        | äººç‰©èªŒ   | âœ…   | âœ…   | âœ…   | âœ… å·²å¯¦ä½œ (ç³»çµ±1) |
| post             | æ–‡ç«      | âœ…   | âœ…   | âœ…   | âœ… å·²å¯¦ä½œ (ç³»çµ±4) |
| bucket_list_item | äººç”Ÿæ¸…å–® | âœ…   | âŒ   | âœ…   | âœ… å·²å¯¦ä½œ (ç³»çµ±3) |
| core_story       | æ ¸å¿ƒæ•…äº‹ | âœ…   | âŒ   | âœ…   | âœ… å·²å¯¦ä½œ (ç³»çµ±2) |
| one_liner        | ä¸€å¥è©±   | âœ…   | âŒ   | âœ…   | âœ… å·²å¯¦ä½œ (ç³»çµ±2) |
| story            | å°æ•…äº‹   | âœ…   | âŒ   | âœ…   | âœ… å·²å¯¦ä½œ (ç³»çµ±2) |
| gallery          | ç›¸ç°¿     | âœ…   | âœ…   | âœ…   | âŒ æœªå¯¦ä½œ         |
| video            | å½±ç‰‡     | âœ…   | âœ…   | âœ…   | âŒ æœªå¯¦ä½œ         |
| gym              | å®¤å…§å²©é¤¨ | âœ…   | âœ…   | âœ…   | âŒ æœªå¯¦ä½œ         |
| crag             | æˆ¶å¤–å²©å ´ | âœ…   | âœ…   | âœ…   | âŒ æœªå¯¦ä½œ         |
| route            | æ”€å²©è·¯ç·š | âœ…   | âŒ   | âœ…   | âŒ æœªå¯¦ä½œ         |

#### é—œéµç™¼ç¾

**ğŸ”´ åš´é‡å•é¡Œ**: è³‡æ–™åº«å·²ç¶“è¨­è¨ˆç‚º**çµ±ä¸€çš„äº’å‹•ç³»çµ±**,ä½†å‰ç«¯å»æœ‰**å››å¥—å®Œå…¨ä¸åŒçš„å¯¦ä½œ**!

é€™å°è‡´:

1. **è³‡æ–™åº«è¨­è¨ˆè‰¯å¥½ä½†è¢«æµªè²»**: è³‡æ–™åº«æ”¯æ´ 11 ç¨®å¯¦é«”é¡å‹,ä½†å‰ç«¯åªå¯¦ä½œäº† 6 ç¨®
2. **ç„¡æ³•å¿«é€Ÿæ“´å±•**: è¦åŠ å…¥ Gallery/Video/Gym/Crag çš„äº’å‹•åŠŸèƒ½,éœ€è¦å†å¯«ä¸€å¥—å¯¦ä½œ
3. **æ¶æ§‹ä¸ä¸€è‡´**: å¾Œç«¯æ˜¯çµ±ä¸€çš„,å‰ç«¯å»æ˜¯åˆ†æ•£çš„
4. **æ”¶è—åŠŸèƒ½åªåœ¨æ–‡ç« **: è³‡æ–™åº«æ”¯æ´ 6 ç¨®å¯¦é«”æ”¶è—,ä½†åªæœ‰æ–‡ç« æœ‰å‰ç«¯å¯¦ä½œ

---

## çµ±ä¸€é‡æ§‹æ–¹æ¡ˆ

### è¨­è¨ˆç›®æ¨™

1. **å–®ä¸€çœŸç›¸ä¾†æº**: ä¸€å¥—çµ„ä»¶ç³»çµ±è™•ç†æ‰€æœ‰äº’å‹•
2. **å¯é…ç½®æ€§**: é€é props é…ç½®å¤–è§€å’Œè¡Œç‚º
3. **ä¸€è‡´çš„ UX**: çµ±ä¸€çš„é¡è‰²ã€åœ–æ¨™ã€å‹•ç•«
4. **æœ€ä½³æ•ˆèƒ½**: çµ±ä¸€ä½¿ç”¨ TanStack Query + æ¨‚è§€æ›´æ–°
5. **æ˜“æ–¼ç¶­è­·**: ä¿®æ”¹ä¸€è™•,å…¨ç«™ç”Ÿæ•ˆ

### çµ±ä¸€çµ„ä»¶å±¤ç´šçµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UnifiedLikeButton                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Props:                                                       â”‚ â”‚
â”‚  â”‚  - entityType: 'post' | 'biography' | 'core-story' | ...    â”‚ â”‚
â”‚  â”‚  - entityId: string                                         â”‚ â”‚
â”‚  â”‚  - size?: 'sm' | 'md'                                       â”‚ â”‚
â”‚  â”‚  - showCount?: boolean                                      â”‚ â”‚
â”‚  â”‚  - optimisticUpdate?: boolean         (é è¨­ true)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ çµ±ä¸€è¨­è¨ˆè¦ç¯„                                                â”‚ â”‚
â”‚  â”‚  æ‰€æœ‰å…§å®¹é¡å‹ â†’ Mountain + Emerald (ç¶ è‰²)                  â”‚ â”‚
â”‚  â”‚  ç„¡éœ€é…ç½®,è‡ªå‹•æ‡‰ç”¨çµ±ä¸€è¦ç¯„                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å…§éƒ¨ä½¿ç”¨ Hooks                                              â”‚ â”‚
â”‚  â”‚  const { data, isLoading } = useEntityLike(entityType, id) â”‚ â”‚
â”‚  â”‚  const mutation = useEntityLikeMutation(entityType, id)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ UI æ¸²æŸ“                                                     â”‚ â”‚
â”‚  â”‚  <Icon className={isLiked ? 'fill-current' : ''} />       â”‚ â”‚
â”‚  â”‚  {showCount && <span>{count}</span>}                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 UnifiedCommentSection                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Props:                                                       â”‚ â”‚
â”‚  â”‚  - entityType: 'post' | 'biography' | ...                   â”‚ â”‚
â”‚  â”‚  - entityId: string                                         â”‚ â”‚
â”‚  â”‚  - mode?: 'sheet' | 'inline' | 'embedded'  (è‡ªå‹•é¸æ“‡)      â”‚ â”‚
â”‚  â”‚  - contentTitle?: string                                    â”‚ â”‚
â”‚  â”‚  - size?: 'sm' | 'md'                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ é è¨­æ¨¡å¼é¸æ“‡                                                â”‚ â”‚
â”‚  â”‚  core-story, story, one-liner â†’ Sheet (å´é‚Šæ¬„)            â”‚ â”‚
â”‚  â”‚  post, biography, bucket-list â†’ Inline (å±•é–‹)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å…§éƒ¨çµ„ä»¶                                                    â”‚ â”‚
â”‚  â”‚  - CommentList (ç•™è¨€åˆ—è¡¨)                                  â”‚ â”‚
â”‚  â”‚  - CommentItem (å–®æ¢ç•™è¨€,æ”¯æ´åˆªé™¤)                         â”‚ â”‚
â”‚  â”‚  - CommentForm (æ–°å¢ç•™è¨€è¡¨å–®)                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ ¹æ“š mode æ¸²æŸ“ä¸åŒ UI                                       â”‚ â”‚
â”‚  â”‚  Sheet:    <SheetContent side="right">                     â”‚ â”‚
â”‚  â”‚  Inline:   <div className="mt-4 border-t">                 â”‚ â”‚
â”‚  â”‚  Embedded: <div> (ç„¡ trigger button)                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TanStack Query å±¤                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ useEntityLike(entityType, entityId)                         â”‚ â”‚
â”‚  â”‚  queryKey: ['like-status', entityType, entityId]           â”‚ â”‚
â”‚  â”‚  staleTime: 5 min                                           â”‚ â”‚
â”‚  â”‚  â†’ { liked: boolean, count: number }                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ useEntityLikeMutation(entityType, entityId)                 â”‚ â”‚
â”‚  â”‚  onMutate: æ¨‚è§€æ›´æ–°å¿«å–                                     â”‚ â”‚
â”‚  â”‚  onError: å›æ»¾å¿«å–                                          â”‚ â”‚
â”‚  â”‚  onSuccess: æ›´æ–°çœŸå¯¦æ•¸æ“š                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Service æ˜ å°„                                                â”‚ â”‚
â”‚  â”‚  const service = getServiceByEntityType(entityType)        â”‚ â”‚
â”‚  â”‚  â†’ biographyService | postService | bucketListService      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½¿ç”¨ç¯„ä¾‹å°æ¯”

#### âŒ é‡æ§‹å‰ - æ–‡ç« è©³æƒ…é  (330 è¡Œ)

```tsx
// BlogDetailClient.tsx
const [isLiked, setIsLiked] = useState(false)
const [likeCount, setLikeCount] = useState(0)
const [isBookmarked, setIsBookmarked] = useState(false)
const [bookmarkCount, setBookmarkCount] = useState(0)
const [isLiking, setIsLiking] = useState(false)
const [isBookmarking, setIsBookmarking] = useState(false)

useEffect(() => {
  // åˆå§‹åŒ–æŒ‰è®šç‹€æ…‹
  loadLikeStatus()
}, [id])

const loadLikeStatus = async () => {
  const response = await postService.getLikeStatus(id)
  if (response.success) {
    setIsLiked(response.data.liked)
    setLikeCount(response.data.likes)
  }
}

const handleLike = async () => {
  if (!isAuthenticated) { router.push('/auth/login'); return }
  if (isLiking) return
  setIsLiking(true)
  try {
    const response = await postService.toggleLike(id)
    if (response.success && response.data) {
      setIsLiked(response.data.liked)
      setLikeCount(response.data.likes)
      toast({ title: response.data.liked ? 'å·²æŒ‰è®š' : 'å·²å–æ¶ˆæŒ‰è®š' })
    }
  } catch (error) {
    toast({ title: 'æ“ä½œå¤±æ•—', variant: 'destructive' })
  } finally {
    setIsLiking(false)
  }
}

// ... é¡ä¼¼çš„ handleBookmark é‚è¼¯ (å† 30 è¡Œ)

// UI æ¸²æŸ“
<button onClick={handleLike} disabled={isLiking}
  className={isLiked ? 'text-emerald-600' : 'text-gray-500'}>
  <Mountain size={14} className={isLiked ? 'fill-emerald-600' : ''} />
  {likeCount > 0 && likeCount}
</button>

<CommentSection postId={id} />  // å¦å¤– 250 è¡Œçš„çµ„ä»¶
```

#### âœ… é‡æ§‹å¾Œ - æ–‡ç« è©³æƒ…é  (3 è¡Œ)

```tsx
// BlogDetailClient.tsx
<UnifiedLikeButton entityType="post" entityId={id} />
<UnifiedBookmarkButton entityType="post" entityId={id} />
<UnifiedCommentSection entityType="post" entityId={id} />
```

**æ¸›å°‘**: 330 è¡Œ â†’ 3 è¡Œ = **æ¸›å°‘ 327 è¡Œ (99%)**

---

### æ¨è–¦æ¶æ§‹

#### çµ±ä¸€çš„ Hooks

```typescript
// src/lib/hooks/useUnifiedInteraction.ts

/**
 * çµ±ä¸€çš„æŒ‰è®š hook
 */
export function useEntityLike(
  entityType: 'biography' | 'post' | 'core-story' | 'story' | 'one-liner' | 'bucket-list' | 'gallery' | 'video' | 'gym' | 'crag' | 'route',
  entityId: string | undefined
) {
  return useQuery({
    queryKey: ['like-status', entityType, entityId],
    queryFn: async () => {
      if (!entityId) return { liked: false, count: 0 }

      // æ ¹æ“š entityType èª¿ç”¨å°æ‡‰çš„ API
      const service = getServiceByEntityType(entityType)
      const response = await service.getLikeStatus(entityId)

      return {
        liked: response.data.liked,
        count: response.data.likes,
      }
    },
    enabled: !!entityId,
    staleTime: 1000 * 60 * 5,  // 5 åˆ†é˜
  })
}

/**
 * çµ±ä¸€çš„æŒ‰è®š mutation
 */
export function useEntityLikeMutation(
  entityType: 'biography' | 'core-story' | ...,
  entityId: string | undefined
) {
  const queryClient = useQueryClient()

  return useMutation({
    mutationFn: async () => {
      if (!entityId) throw new Error('No entity ID')

      const service = getServiceByEntityType(entityType)
      const response = await service.toggleLike(entityId)

      return response.data
    },
    onMutate: async () => {
      // æ¨‚è§€æ›´æ–°
      await queryClient.cancelQueries(['like-status', entityType, entityId])
      const previous = queryClient.getQueryData(['like-status', entityType, entityId])

      queryClient.setQueryData(['like-status', entityType, entityId], (old: any) => ({
        liked: !old.liked,
        count: old.liked ? old.count - 1 : old.count + 1,
      }))

      return { previous }
    },
    onError: (_err, _variables, context) => {
      // éŒ¯èª¤å›æ»¾
      queryClient.setQueryData(
        ['like-status', entityType, entityId],
        context?.previous
      )
    },
    onSuccess: (data) => {
      queryClient.setQueryData(['like-status', entityType, entityId], {
        liked: data.liked,
        count: data.likes,
      })
    },
  })
}

/**
 * çµ±ä¸€çš„ç•™è¨€ hook
 */
export function useEntityComments(
  entityType: 'biography' | 'core-story' | ...,
  entityId: string | undefined
) {
  return useQuery({
    queryKey: ['comments', entityType, entityId],
    queryFn: async () => {
      if (!entityId) return []

      const service = getServiceByEntityType(entityType)
      const response = await service.getComments(entityId)

      return response.data
    },
    enabled: !!entityId,
    staleTime: 1000 * 60 * 2,  // 2 åˆ†é˜
  })
}

/**
 * Service æ˜ å°„
 */
function getServiceByEntityType(entityType: string) {
  const serviceMap = {
    'biography': biographyService,
    'core-story': biographyContentService,
    'story': biographyContentService,
    'one-liner': biographyContentService,
    'bucket-list': bucketListService,
  }

  return serviceMap[entityType]
}
```

#### çµ±ä¸€çš„çµ„ä»¶

```typescript
// src/components/shared/UnifiedLikeButton.tsx

interface UnifiedLikeButtonProps {
  entityType: 'biography' | 'post' | 'core-story' | 'story' | 'one-liner' | 'bucket-list' | 'gallery' | 'video' | 'gym' | 'crag' | 'route'
  entityId: string

  // å¤–è§€é…ç½®
  // åœ–æ¨™å›ºå®šç‚º Mountainï¼Œé¡è‰²å›ºå®šç‚º emerald-600 (ç¶ è‰²)
  size?: 'sm' | 'md'
  showCount?: boolean

  // è¡Œç‚ºé…ç½®
  optimisticUpdate?: boolean  // é è¨­ true

  // å›èª¿
  onLikeChange?: (liked: boolean, count: number) => void
}

// src/components/shared/UnifiedBookmarkButton.tsx

interface UnifiedBookmarkButtonProps {
  entityType: 'post' | 'gallery' | 'video' | 'gym' | 'crag' | 'biography'  // åªæœ‰é€™6ç¨®æ”¯æ´æ”¶è—
  entityId: string

  // å¤–è§€é…ç½®
  colorScheme?: 'brand' | 'yellow'  // é è¨­ brand
  size?: 'sm' | 'md'
  showCount?: boolean

  // è¡Œç‚ºé…ç½®
  optimisticUpdate?: boolean  // é è¨­ true

  // å›èª¿
  onBookmarkChange?: (bookmarked: boolean, count: number) => void
}

export function UnifiedBookmarkButton({
  entityType,
  entityId,
  colorScheme = 'brand',
  size = 'sm',
  showCount = true,
  optimisticUpdate = true,
  onBookmarkChange,
}: UnifiedBookmarkButtonProps) {
  const { data, isLoading } = useEntityBookmark(entityType, entityId)
  const bookmarkMutation = useEntityBookmarkMutation(entityType, entityId)

  const { isAuthenticated } = useAuthStore()
  const router = useRouter()
  const { toast } = useToast()

  const iconSize = size === 'sm' ? 14 : 16

  const colorClasses = {
    brand: {
      default: 'text-gray-500 hover:text-brand-accent-hover',
      active: 'text-brand-accent-hover fill-brand-accent-hover',
    },
    yellow: {
      default: 'text-gray-500 hover:text-yellow-500',
      active: 'text-yellow-500 fill-yellow-500',
    },
  }

  const handleClick = async (e: React.MouseEvent) => {
    e.stopPropagation()
    e.preventDefault()

    if (!isAuthenticated) {
      router.push('/auth/login')
      return
    }

    try {
      const result = await bookmarkMutation.mutateAsync()
      onBookmarkChange?.(result.bookmarked, result.bookmarks)
      toast({
        title: result.bookmarked ? 'å·²æ”¶è—' : 'å·²å–æ¶ˆæ”¶è—',
      })
    } catch (error) {
      toast({
        title: 'æ“ä½œå¤±æ•—',
        description: 'è«‹ç¨å¾Œå†è©¦',
        variant: 'destructive',
      })
    }
  }

  if (isLoading) {
    return (
      <button disabled className="inline-flex items-center gap-1 text-sm text-gray-400">
        <Loader2 className="h-4 w-4 animate-spin" />
        {showCount && <span>-</span>}
      </button>
    )
  }

  const isBookmarked = data?.bookmarked ?? false
  const count = data?.count ?? 0

  return (
    <button
      onClick={handleClick}
      disabled={bookmarkMutation.isPending}
      className={cn(
        'inline-flex items-center gap-1 text-sm transition-colors',
        colorClasses[colorScheme][isBookmarked ? 'active' : 'default']
      )}
    >
      {bookmarkMutation.isPending ? (
        <Loader2 className="h-4 w-4 animate-spin" />
      ) : (
        <Bookmark
          size={iconSize}
          className={cn(isBookmarked && 'fill-current')}
        />
      )}
      {showCount && count > 0 && <span>{count}</span>}
    </button>
  )
}

export function UnifiedLikeButton({
  entityType,
  entityId,
  size = 'sm',
  showCount = true,
  optimisticUpdate = true,
  onLikeChange,
}: UnifiedLikeButtonProps) {
  const { data, isLoading: isLoadingStatus } = useEntityLike(entityType, entityId)
  const likeMutation = useEntityLikeMutation(entityType, entityId)

  const { isAuthenticated } = useAuthStore()
  const router = useRouter()
  const { toast } = useToast()

  // çµ±ä¸€ä½¿ç”¨ Mountain åœ–æ¨™ + emerald-600 é¡è‰²
  const Icon = Mountain
  const iconSize = size === 'sm' ? 14 : 16

  const colorClasses = {
    default: 'text-gray-500 hover:text-emerald-600',
    active: 'text-emerald-600',
  }

  const handleClick = async (e: React.MouseEvent) => {
    e.stopPropagation()
    e.preventDefault()

    if (!isAuthenticated) {
      router.push('/auth/login')
      return
    }

    try {
      const result = await likeMutation.mutateAsync()
      onLikeChange?.(result.liked, result.likes)
    } catch (error) {
      toast({
        title: 'æ“ä½œå¤±æ•—',
        description: 'è«‹ç¨å¾Œå†è©¦',
        variant: 'destructive',
      })
    }
  }

  if (isLoadingStatus) {
    return (
      <button disabled className="inline-flex items-center gap-1 text-sm text-gray-400">
        <Loader2 className="h-4 w-4 animate-spin" />
        {showCount && <span>-</span>}
      </button>
    )
  }

  const isLiked = data?.liked ?? false
  const count = data?.count ?? 0

  return (
    <button
      onClick={handleClick}
      disabled={likeMutation.isPending}
      className={cn(
        'inline-flex items-center gap-1 text-sm transition-colors',
        colorClasses[isLiked ? 'active' : 'default']
      )}
    >
      {likeMutation.isPending ? (
        <Loader2 className="h-4 w-4 animate-spin" />
      ) : (
        <Icon size={iconSize} className={cn(isLiked && 'fill-current')} />
      )}
      {showCount && <span>{count}</span>}
    </button>
  )
}

**çµ±ä¸€è¦ç¯„**: æ‰€æœ‰å…§å®¹é¡å‹éƒ½ä½¿ç”¨ Mountain åœ–æ¨™ + emerald-600 é¡è‰²ï¼Œç„¡éœ€é…ç½®ã€‚
```

```typescript
// src/components/shared/UnifiedCommentSection.tsx

interface UnifiedCommentSectionProps {
  entityType: 'biography' | 'core-story' | 'story' | 'one-liner' | 'bucket-list'
  entityId: string

  // UI é…ç½®
  mode?: 'sheet' | 'inline' | 'embedded'  // é è¨­æ ¹æ“š entityType æ±ºå®š
  size?: 'sm' | 'md'
  contentTitle?: string  // Sheet æ¨¡å¼çš„æ¨™é¡Œ

  // å›èª¿
  onCountChange?: (count: number) => void
}

export function UnifiedCommentSection({
  entityType,
  entityId,
  mode,
  size = 'sm',
  contentTitle,
  onCountChange,
}: UnifiedCommentSectionProps) {
  const [isOpen, setIsOpen] = useState(false)
  const [content, setContent] = useState('')

  // é è¨­æ¨¡å¼
  const defaultMode =
    entityType === 'biography' || entityType === 'bucket-list'
      ? 'inline'
      : 'sheet'
  const finalMode = mode ?? defaultMode

  const { data: comments = [], isLoading } = useEntityComments(entityType, entityId)
  const commentMutation = useEntityCommentMutation(entityType, entityId)

  const { isAuthenticated, user } = useAuthStore()
  const router = useRouter()
  const { toast } = useToast()

  useEffect(() => {
    onCountChange?.(comments.length)
  }, [comments.length, onCountChange])

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()

    if (!isAuthenticated) {
      router.push('/auth/login')
      return
    }

    if (!content.trim()) return

    try {
      await commentMutation.mutateAsync(content.trim())
      setContent('')
      toast({
        title: 'ç•™è¨€æˆåŠŸ',
        description: 'ä½ çš„ç•™è¨€å·²ç™¼å¸ƒ',
      })
    } catch (error) {
      toast({
        title: 'ç•™è¨€å¤±æ•—',
        description: 'è«‹ç¨å¾Œå†è©¦',
        variant: 'destructive',
      })
    }
  }

  const handleDelete = async (commentId: string) => {
    try {
      await deleteCommentMutation.mutateAsync(commentId)
      toast({
        title: 'åˆªé™¤æˆåŠŸ',
        description: 'ç•™è¨€å·²åˆªé™¤',
      })
    } catch (error) {
      toast({
        title: 'åˆªé™¤å¤±æ•—',
        description: 'è«‹ç¨å¾Œå†è©¦',
        variant: 'destructive',
      })
    }
  }

  // æ ¹æ“š mode æ¸²æŸ“ä¸åŒçš„ UI
  if (finalMode === 'sheet') {
    return <CommentSheet {...props} />
  }

  if (finalMode === 'inline') {
    return <CommentInline {...props} />
  }

  return <CommentEmbedded {...props} />
}
```

### ä½¿ç”¨ç¯„ä¾‹

```typescript
// 1. æ–‡ç« è©³æƒ…é  (BlogDetailClient)
// å–ä»£ 80 è¡Œå…§è¯ä»£ç¢¼ + 250 è¡Œ CommentSection
<div className="flex items-center gap-4">
  <UnifiedLikeButton
    entityType="post"
    entityId={postId}
    // è‡ªå‹•ä½¿ç”¨: iconType="mountain", colorScheme="emerald"
  />

  <UnifiedBookmarkButton
    entityType="post"
    entityId={postId}
    // è‡ªå‹•ä½¿ç”¨: colorScheme="brand"
  />

  <UnifiedCommentSection
    entityType="post"
    entityId={postId}
    // è‡ªå‹•ä½¿ç”¨: mode="inline"
  />
</div>

// 2. äººç‰©èªŒä¸»é«” (HeroSection)
// å–ä»£ BiographyLikeButton + BiographyCommentSection (478 è¡Œ)
<UnifiedLikeButton
  entityType="biography"
  entityId={biographyId}
  // è‡ªå‹•ä½¿ç”¨: iconType="mountain", colorScheme="emerald"
/>

<UnifiedCommentSection
  entityType="biography"
  entityId={biographyId}
  contentTitle={personName}
  // è‡ªå‹•ä½¿ç”¨: mode="inline"
/>

// 3. æ ¸å¿ƒæ•…äº‹ (ChapterMeeting)
// å–ä»£ ContentLikeButton + ContentCommentSheet
<UnifiedLikeButton
  entityType="core-story"
  entityId={storyId}
  // è‡ªå‹•ä½¿ç”¨: iconType="heart", colorScheme="red"
  size="md"
/>

<UnifiedCommentSection
  entityType="core-story"
  entityId={storyId}
  contentTitle="ä½ èˆ‡æ”€å²©çš„ç›¸é‡"
  // è‡ªå‹•ä½¿ç”¨: mode="sheet"
  size="md"
/>

// 4. äººç”Ÿæ¸…å–® (BucketListCard)
// å–ä»£ LikeButton + CommentSection
<UnifiedLikeButton
  entityType="bucket-list"
  entityId={itemId}
  // è‡ªå‹•ä½¿ç”¨: iconType="mountain", colorScheme="red"
/>

<UnifiedCommentSection
  entityType="bucket-list"
  entityId={itemId}
  // è‡ªå‹•ä½¿ç”¨: mode="inline"
/>

// 5. æœªä¾†æ“´å±•: ç›¸ç°¿
// é›¶ä»£ç¢¼æˆæœ¬,ç›´æ¥ä½¿ç”¨
<UnifiedLikeButton entityType="gallery" entityId={galleryId} />
<UnifiedBookmarkButton entityType="gallery" entityId={galleryId} />
<UnifiedCommentSection entityType="gallery" entityId={galleryId} />

// 6. æœªä¾†æ“´å±•: å²©é¤¨
// é›¶ä»£ç¢¼æˆæœ¬,ç›´æ¥ä½¿ç”¨
<UnifiedLikeButton entityType="gym" entityId={gymId} />
<UnifiedBookmarkButton entityType="gym" entityId={gymId} />
<UnifiedCommentSection entityType="gym" entityId={gymId} />
```

#### ç¨‹å¼ç¢¼è¡Œæ•¸å°æ¯”

| å¯¦ä½œæ–¹å¼     | èˆŠç³»çµ± (ç•¶å‰) | æ–°ç³»çµ± (çµ±ä¸€çµ„ä»¶)       | æ¸›å°‘         |
| ------------ | ------------- | ----------------------- | ------------ |
| æ–‡ç« äº’å‹•     | 330 è¡Œ        | 3 è¡Œ JSX                | -327 è¡Œ      |
| äººç‰©èªŒäº’å‹•   | 478 è¡Œ        | 2 è¡Œ JSX                | -476 è¡Œ      |
| æ ¸å¿ƒæ•…äº‹äº’å‹• | 398 è¡Œ        | 2 è¡Œ JSX                | -396 è¡Œ      |
| äººç”Ÿæ¸…å–®äº’å‹• | 353 è¡Œ        | 2 è¡Œ JSX                | -351 è¡Œ      |
| **ç¸½è¨ˆ**     | **1559 è¡Œ**   | **9 è¡Œ JSX + çµ±ä¸€çµ„ä»¶** | **-1550 è¡Œ** |

**å…±ç”¨çµ„ä»¶**:

- UnifiedLikeButton: ~150 è¡Œ
- UnifiedBookmarkButton: ~120 è¡Œ
- UnifiedCommentSection: ~300 è¡Œ
- Hooks: ~200 è¡Œ
- **ç¸½è¨ˆ: ~770 è¡Œ**

**æ·¨æ”¶ç›Š**: 1559 - 770 = **æ¸›å°‘ 789 è¡Œä»£ç¢¼** (ç´„ 51% æ¸›å°‘)

---

## é‡æ§‹å¯¦æ–½è¨ˆç•«

### é‡æ§‹è·¯ç·šåœ–è¦–è¦ºåŒ–

```mermaid
gantt
    title äº’å‹•ç³»çµ±çµ±ä¸€é‡æ§‹æ™‚ç¨‹ (5-6é€±)
    dateFormat YYYY-MM-DD
    section Week 1: åŸºç¤å»ºè¨­
    å‰µå»ºçµ±ä¸€ Hooks           :w1-1, 2026-01-27, 3d
    å¯¦ä½œ Service æ˜ å°„        :w1-2, after w1-1, 2d
    æ’°å¯«å–®å…ƒæ¸¬è©¦            :w1-3, after w1-2, 2d

    section Week 2: çµ„ä»¶é–‹ç™¼
    UnifiedLikeButton       :w2-1, 2026-02-03, 2d
    UnifiedBookmarkButton   :w2-2, after w2-1, 1d
    UnifiedCommentSection   :w2-3, after w2-2, 2d
    Storybook & æ¸¬è©¦        :w2-4, after w2-3, 2d

    section Week 3: é·ç§» (é«˜æµé‡)
    æ–‡ç« ç³»çµ±é·ç§»            :w3-1, 2026-02-10, 2d
    äººç‰©èªŒä¸»é«”é·ç§»          :w3-2, after w3-1, 2d
    æ ¸å¿ƒæ•…äº‹é·ç§»            :w3-3, after w3-2, 3d

    section Week 4: é·ç§» (å…¶ä»–)
    å°æ•…äº‹/ä¸€å¥è©±é·ç§»       :w4-1, 2026-02-17, 2d
    äººç”Ÿæ¸…å–®é·ç§»            :w4-2, after w4-1, 2d
    æ•´åˆæ¸¬è©¦                :w4-3, after w4-2, 3d

    section Week 5: æ¸¬è©¦
    E2E æ¸¬è©¦                :w5-1, 2026-02-24, 2d
    æ•ˆèƒ½æ¸¬è©¦                :w5-2, after w5-1, 2d
    è·¨ç€è¦½å™¨æ¸¬è©¦            :w5-3, after w5-2, 3d

    section Week 6: æ¸…ç†
    åˆªé™¤èˆŠçµ„ä»¶              :w6-1, 2026-03-03, 2d
    æ–‡ä»¶æ›´æ–°                :w6-2, after w6-1, 2d
    åœ˜éšŠåŸ¹è¨“                :w6-3, after w6-2, 3d
```

### é‡Œç¨‹ç¢‘æª¢æŸ¥é»

| é€±æ¬¡       | é‡Œç¨‹ç¢‘            | æª¢æŸ¥é …ç›®                                                   | äº¤ä»˜ç‰©                                                              |
| ---------- | ----------------- | ---------------------------------------------------------- | ------------------------------------------------------------------- |
| **Week 1** | âœ… åŸºç¤å»ºè¨­å®Œæˆ   | - Hooks æ¸¬è©¦è¦†è“‹ç‡ > 80%<br>- Service æ˜ å°„æ”¯æ´ 11 ç¨®é¡å‹   | `useUnifiedInteraction.ts`                                          |
| **Week 2** | âœ… çµ„ä»¶é–‹ç™¼å®Œæˆ   | - 3 å€‹çµ±ä¸€çµ„ä»¶å®Œæˆ<br>- Storybook å¯æŸ¥çœ‹æ‰€æœ‰ç¯„ä¾‹           | UnifiedLikeButton<br>UnifiedBookmarkButton<br>UnifiedCommentSection |
| **Week 3** | âœ… é«˜æµé‡é é¢é·ç§» | - æ–‡ç« /äººç‰©èªŒ/æ ¸å¿ƒæ•…äº‹é·ç§»<br>- ç„¡å›æ­¸ bug<br>- æ•ˆèƒ½ç„¡è¡°é€€ | æ¸›å°‘ ~1200 è¡Œä»£ç¢¼                                                   |
| **Week 4** | âœ… æ‰€æœ‰é é¢é·ç§»   | - æ‰€æœ‰ä½¿ç”¨ä½ç½®å·²é·ç§»<br>- æ•´åˆæ¸¬è©¦é€šé                     | æ¸›å°‘ ~1550 è¡Œä»£ç¢¼                                                   |
| **Week 5** | âœ… æ¸¬è©¦å®Œæˆ       | - E2E æ¸¬è©¦é€šé<br>- æ•ˆèƒ½æå‡ > 30%<br>- å…¼å®¹æ€§æ¸¬è©¦é€šé     | æ¸¬è©¦å ±å‘Š                                                            |
| **Week 6** | âœ… é‡æ§‹å®Œæˆ       | - èˆŠä»£ç¢¼å·²åˆªé™¤<br>- æ–‡ä»¶å·²æ›´æ–°<br>- åœ˜éšŠå·²åŸ¹è¨“             | é‡æ§‹ç¸½çµå ±å‘Š                                                        |

---

### ç¬¬ 1 é€±: åŸºç¤å»ºè¨­

**ç›®æ¨™**: å»ºç«‹çµ±ä¸€çš„ hooks å’Œå·¥å…·å‡½æ•¸

- [ ] å‰µå»º `src/lib/hooks/useUnifiedInteraction.ts`
- [ ] å¯¦ä½œ `useEntityLike`, `useEntityLikeMutation`
- [ ] å¯¦ä½œ `useEntityBookmark`, `useEntityBookmarkMutation` (æ–°å¢æ”¶è—åŠŸèƒ½)
- [ ] å¯¦ä½œ `useEntityComments`, `useEntityCommentMutation`
- [ ] å‰µå»º service æ˜ å°„å‡½æ•¸ (æ”¯æ´ 11 ç¨® entity_type)
- [ ] æ’°å¯«å–®å…ƒæ¸¬è©¦ (hooks å±¤ç´š)

**äº¤ä»˜ç‰©**:

- å®Œæ•´çš„äº’å‹• hooks (æŒ‰è®šã€æ”¶è—ã€ç•™è¨€)
- Service æ˜ å°„å±¤,æ”¯æ´æ‰€æœ‰ entity_type
- å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ > 80%

**æŠ€è¡“ç´°ç¯€**:

- çµ±ä¸€ä½¿ç”¨ TanStack Query
- æ¨‚è§€æ›´æ–° + éŒ¯èª¤å›æ»¾æ©Ÿåˆ¶
- å¿«å–ç­–ç•¥: 5åˆ†é˜ staleTime

### ç¬¬ 2 é€±: çµ±ä¸€çµ„ä»¶é–‹ç™¼

**ç›®æ¨™**: é–‹ç™¼å¯é…ç½®çš„çµ±ä¸€çµ„ä»¶

- [ ] å‰µå»º `src/components/shared/UnifiedLikeButton.tsx`
- [ ] å‰µå»º `src/components/shared/UnifiedBookmarkButton.tsx` (æ–°å¢)
- [ ] å‰µå»º `src/components/shared/UnifiedCommentSection.tsx`
- [ ] å¯¦ä½œ Sheet / Inline / Embedded ä¸‰ç¨®ç•™è¨€æ¨¡å¼
- [ ] å¯¦ä½œé è¨­é…ç½®é‚è¼¯ (æ ¹æ“š entityType è‡ªå‹•é¸æ“‡åœ–æ¨™/é¡è‰²/æ¨¡å¼)
- [ ] å»ºç«‹ Storybook stories (å±•ç¤ºæ‰€æœ‰ entity_type çš„ä½¿ç”¨ç¯„ä¾‹)
- [ ] æ’°å¯«çµ„ä»¶æ¸¬è©¦

**äº¤ä»˜ç‰©**:

- åŠŸèƒ½å®Œæ•´çš„çµ±ä¸€çµ„ä»¶ (æŒ‰è®šã€æ”¶è—ã€ç•™è¨€)
- Storybook æ–‡ä»¶ (åŒ…å«æ‰€æœ‰é…ç½®ç¯„ä¾‹)
- çµ„ä»¶æ¸¬è©¦è¦†è“‹ç‡ > 80%

**é‡é»é…ç½®**:

- æŒ‰è®š: çµ±ä¸€ä½¿ç”¨ Mountain åœ–æ¨™ + Emerald é¡è‰² (ç¶ è‰²)
- æ”¶è—: Bookmark åœ–æ¨™, Brand/Yellow é¡è‰²
- ç•™è¨€: Sheet (Chapters) / Inline (å…¶ä»–)

### ç¬¬ 3-4 é€±: æ¼¸é€²å¼é·ç§»

**ç›®æ¨™**: é€æ­¥é·ç§»ç¾æœ‰ä½¿ç”¨ä½ç½®

#### ç¬¬ 3 é€±: é«˜æµé‡é é¢é·ç§»

**å„ªå…ˆé †åº (æŒ‰æµé‡å’Œå½±éŸ¿ç¯„åœ)**:

1. **æ–‡ç« ç³»çµ±** (BlogDetailClient) - æœ€é«˜æµé‡
   - æ›¿æ›å…§è¯çš„æŒ‰è®š/æ”¶è—é‚è¼¯ (80 è¡Œ) â†’ UnifiedLikeButton + UnifiedBookmarkButton
   - æ›¿æ› blog/CommentSection (250 è¡Œ) â†’ UnifiedCommentSection
   - é æœŸæ¸›å°‘: **330 è¡Œä»£ç¢¼**

2. **äººç‰©èªŒä¸»é«”** (HeroSection)
   - æ›¿æ› BiographyLikeButton (98 è¡Œ) â†’ UnifiedLikeButton
   - æ›¿æ› BiographyCommentSection (380 è¡Œ) â†’ UnifiedCommentSection
   - é æœŸæ¸›å°‘: **478 è¡Œä»£ç¢¼**

3. **æ ¸å¿ƒæ•…äº‹** (Chapters 1, 2, 4)
   - æ›¿æ› ContentLikeButton (118 è¡Œ) â†’ UnifiedLikeButton
   - æ›¿æ› ContentCommentSheet (280 è¡Œ) â†’ UnifiedCommentSection
   - é æœŸæ¸›å°‘: **398 è¡Œä»£ç¢¼**

#### ç¬¬ 4 é€±: å…¶ä»–å…§å®¹é¡å‹é·ç§»

4. **å°æ•…äº‹å’Œä¸€å¥è©±** (BiographyStories, BiographyOneLiners)
   - ç›®å‰ä½¿ç”¨ ContentLikeButton + ContentCommentSheet
   - æ”¹ç‚º UnifiedLikeButton + UnifiedCommentSection

5. **äººç”Ÿæ¸…å–®** (BucketListCard)
   - æ›¿æ› LikeButton (121 è¡Œ) â†’ UnifiedLikeButton
   - æ›¿æ› biography/comment-section.tsx (232 è¡Œ) â†’ UnifiedCommentSection
   - é æœŸæ¸›å°‘: **353 è¡Œä»£ç¢¼**

**é·ç§»æ­¥é©Ÿ** (æ¯å€‹åŠŸèƒ½):

1. å‰µå»ºæ–°åˆ†æ”¯ (e.g., `refactor/unified-interaction-posts`)
2. æ›¿æ›ç‚ºçµ±ä¸€çµ„ä»¶
3. æœ¬åœ°æ¸¬è©¦æ‰€æœ‰äº’å‹•åŠŸèƒ½ (æŒ‰è®šã€æ”¶è—ã€ç•™è¨€ã€åˆªé™¤)
4. æäº¤ PR,é€²è¡Œ code review
5. éƒ¨ç½²åˆ° preview ç’°å¢ƒæ¸¬è©¦
6. A/B æ¸¬è©¦ (ä¿ç•™èˆŠçµ„ä»¶ä½œç‚º fallback)
7. ç›£æ§éŒ¯èª¤æ—¥èªŒ 24 å°æ™‚
8. é€æ­¥æ¨é€²åˆ° production (10% â†’ 50% â†’ 100%)

**é¢¨éšªæ§åˆ¶**:

- æ¯å€‹é·ç§»ç¨ç«‹é€²è¡Œ,å¤±æ•—ä¸å½±éŸ¿å…¶ä»–
- ä¿ç•™èˆŠçµ„ä»¶æ¨™è¨˜ç‚º `@deprecated`,ç¢ºèªç©©å®šå¾Œåˆªé™¤

### ç¬¬ 5 é€±: å®Œæ•´æ¸¬è©¦

**ç›®æ¨™**: ç¢ºä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸é‹ä½œ

#### æ•´åˆæ¸¬è©¦ (E2E)

- [ ] æ–‡ç« æŒ‰è®š/æ”¶è—/ç•™è¨€æµç¨‹
- [ ] äººç‰©èªŒæŒ‰è®š/ç•™è¨€æµç¨‹
- [ ] æ ¸å¿ƒæ•…äº‹æŒ‰è®š/ç•™è¨€æµç¨‹
- [ ] å°æ•…äº‹æŒ‰è®š/ç•™è¨€æµç¨‹
- [ ] ä¸€å¥è©±ç³»åˆ—æŒ‰è®š/ç•™è¨€æµç¨‹
- [ ] äººç”Ÿæ¸…å–®æŒ‰è®š/ç•™è¨€æµç¨‹

#### åŠŸèƒ½æ¸¬è©¦

- [ ] æœªç™»å…¥ç‹€æ…‹è™•ç† (è·³è½‰ç™»å…¥é )
- [ ] ç™»å…¥å¾Œæ­£å¸¸äº’å‹•
- [ ] æŒ‰è®š Toggle (æŒ‰è®š â†’ å–æ¶ˆæŒ‰è®š â†’ æŒ‰è®š)
- [ ] æ”¶è— Toggle (æ”¶è— â†’ å–æ¶ˆæ”¶è— â†’ æ”¶è—)
- [ ] ç•™è¨€æ–°å¢/åˆªé™¤
- [ ] ç•™è¨€åªèƒ½åˆªé™¤è‡ªå·±çš„ (æ¬Šé™æª¢æŸ¥)

#### æ•ˆèƒ½æ¸¬è©¦

- [ ] æ¨‚è§€æ›´æ–°å³æ™‚ç”Ÿæ•ˆ (< 50ms)
- [ ] éŒ¯èª¤å›æ»¾æ­£ç¢ºé‹ä½œ
- [ ] å¿«å–æ©Ÿåˆ¶é‹ä½œ (5åˆ†é˜å…§ä¸é‡è¤‡è«‹æ±‚)
- [ ] API è«‹æ±‚æ¸›å°‘ > 30%

#### å…¼å®¹æ€§æ¸¬è©¦

- [ ] Chrome (æ¡Œé¢ç‰ˆ)
- [ ] Safari (æ¡Œé¢ç‰ˆ)
- [ ] Firefox (æ¡Œé¢ç‰ˆ)
- [ ] Safari (iOS)
- [ ] Chrome (Android)

#### å›æ­¸æ¸¬è©¦

- [ ] æ‰€æœ‰ç¾æœ‰åŠŸèƒ½æ­£å¸¸é‹ä½œ
- [ ] ç„¡ console éŒ¯èª¤
- [ ] UI æ¨£å¼ä¸€è‡´

### ç¬¬ 6 é€±: æ¸…ç†å’Œæ–‡ä»¶

**ç›®æ¨™**: ç§»é™¤èˆŠä»£ç¢¼,æ›´æ–°æ–‡ä»¶

#### ä»£ç¢¼æ¸…ç†

- [ ] æ¨™è¨˜èˆŠçµ„ä»¶ç‚º `@deprecated`
- [ ] ç¢ºèªæ‰€æœ‰ä½¿ç”¨ä½ç½®å·²é·ç§» (å…¨åŸŸæœå°‹)
- [ ] åˆªé™¤èˆŠçµ„ä»¶æª”æ¡ˆ:
  - `biography/biography-like-button.tsx` (98 è¡Œ)
  - `biography/biography-comment-section.tsx` (380 è¡Œ)
  - `biography/like-button.tsx` (121 è¡Œ)
  - `biography/comment-section.tsx` (232 è¡Œ)
  - `blog/CommentSection.tsx` (250 è¡Œ)
  - `biography/display/ContentLikeButton.tsx` (118 è¡Œ) - å¯è€ƒæ…®ä¿ç•™ä½œç‚º alias
  - `biography/display/ContentCommentSheet.tsx` (280 è¡Œ) - å¯è€ƒæ…®ä¿ç•™ä½œç‚º alias
- [ ] åˆªé™¤ BlogDetailClient ä¸­çš„å…§è¯æŒ‰è®š/æ”¶è—é‚è¼¯ (80 è¡Œ)
- [ ] æ¸…ç†æœªä½¿ç”¨çš„ imports

#### æ–‡ä»¶æ›´æ–°

- [ ] æ›´æ–°çµ„ä»¶ä½¿ç”¨æŒ‡å—:
  - çµ±ä¸€äº’å‹•çµ„ä»¶ä½¿ç”¨æ–‡ä»¶
  - entity_type æ”¯æ´åˆ—è¡¨
  - é…ç½®é¸é …èªªæ˜
  - æœ€ä½³å¯¦è¸
- [ ] æ›´æ–° API æ–‡ä»¶:
  - Service æ˜ å°„èªªæ˜
  - TanStack Query å¿«å–ç­–ç•¥
- [ ] æ›´æ–°è¨­è¨ˆè¦ç¯„:
  - äº’å‹•åœ–æ¨™å’Œé¡è‰²è¦ç¯„
  - ä½•æ™‚ä½¿ç”¨ Sheet vs Inline
  - æ”¶è—åŠŸèƒ½çš„ä½¿ç”¨å ´æ™¯
- [ ] å‰µå»ºé·ç§»æŒ‡å— (çµ¦å…¶ä»–é–‹ç™¼è€…)

#### çŸ¥è­˜åˆ†äº«

- [ ] åœ˜éšŠåŸ¹è¨“ session
- [ ] Code walkthrough
- [ ] æ›´æ–° onboarding æ–‡ä»¶

#### æœ€çµ‚æª¢æŸ¥

- [ ] ä»£ç¢¼è¡Œæ•¸å°æ¯” (æ‡‰æ¸›å°‘ç´„ 789 è¡Œ)
- [ ] æ•ˆèƒ½æŒ‡æ¨™æª¢æŸ¥
- [ ] ç”¨æˆ¶åé¥‹æ”¶é›†

---

## é æœŸæ”¶ç›Š

### ä»£ç¢¼è³ªé‡

- âœ… **æ¸›å°‘ 789 è¡Œä»£ç¢¼** (51% æ¸›å°‘,å¾ 1559 è¡Œåˆ° 770 è¡Œ)
- âœ… **åˆªé™¤ 4 å€‹é‡è¤‡çš„ç•™è¨€çµ„ä»¶**,æ•´åˆç‚º 1 å€‹
- âœ… **åˆªé™¤ 3 å€‹é‡è¤‡çš„æŒ‰è®šçµ„ä»¶**,æ•´åˆç‚º 1 å€‹
- âœ… **å–®ä¸€çœŸç›¸ä¾†æº**,æ˜“æ–¼ç¶­è­·
- âœ… **çµ±ä¸€çš„æ¸¬è©¦ç­–ç•¥**,æ¸¬è©¦è¦†è“‹ç‡æå‡

### ç”¨æˆ¶é«”é©—

- âœ… **ä¸€è‡´çš„äº’å‹•æ¨¡å¼**,é™ä½å­¸ç¿’æˆæœ¬
- âœ… **çµ±ä¸€çš„é¡è‰²å’Œåœ–æ¨™**,æ›´å°ˆæ¥­çš„è¦–è¦ºè¨­è¨ˆ
- âœ… **æ›´å¿«çš„äº’å‹•é€Ÿåº¦** - æ¨‚è§€æ›´æ–° < 50ms (ç›®å‰éƒ¨åˆ†åŠŸèƒ½éœ€ç­‰å¾… API)
- âœ… **æ”¶è—åŠŸèƒ½å¯æ“´å±•åˆ°æ‰€æœ‰æ”¯æ´çš„å…§å®¹é¡å‹** (ç›®å‰åªæœ‰æ–‡ç« )
- âœ… **éŒ¯èª¤è™•ç†ä¸€è‡´** - æ‰€æœ‰äº’å‹•éƒ½æœ‰éŒ¯èª¤å›æ»¾å’Œ Toast æç¤º

### é–‹ç™¼æ•ˆç‡

- âœ… **æ–°å¢åŠŸèƒ½é›¶æˆæœ¬** - æ–°çš„å…§å®¹é¡å‹ç›´æ¥ä½¿ç”¨çµ±ä¸€çµ„ä»¶
- âœ… **Bug ä¿®å¾©æ•ˆç‡æå‡ 4 å€** - åªéœ€ä¿®å¾© 1 è™•è€Œé 4 è™•
- âœ… **æ–°åŠŸèƒ½é–‹ç™¼æ™‚é–“æ¸›å°‘ 80%** - é…ç½®å³å¯,ç„¡éœ€é‡è¤‡é–‹ç™¼
- âœ… **æ¸¬è©¦æ™‚é–“æ¸›å°‘ 75%** - 1 å¥—çµ„ä»¶æ¸¬è©¦è¦†è“‹æ‰€æœ‰å ´æ™¯
- âœ… **Code review æ›´å®¹æ˜“** - çµ±ä¸€çš„æ¨¡å¼å’Œå¯¦ä½œ

### æ•ˆèƒ½æå‡

- âœ… **API è«‹æ±‚æ¸›å°‘ 30%** - TanStack Query å¿«å– (5åˆ†é˜)
- âœ… **æ¨‚è§€æ›´æ–°å³æ™‚å›é¥‹** - ç„¡éœ€ç­‰å¾… API
- âœ… **é™ä½ä¼ºæœå™¨è² æ“”** - å¿«å–æ¸›å°‘é‡è¤‡æŸ¥è©¢
- âœ… **éŒ¯èª¤æ¢å¾©æ›´å¿«** - è‡ªå‹•å›æ»¾æ©Ÿåˆ¶

### æœªä¾†æ“´å±•

- âœ… **Gallery/Video/Gym/Crag/Route äº’å‹•åŠŸèƒ½é›¶æˆæœ¬** - ç›´æ¥ä½¿ç”¨ç¾æœ‰çµ„ä»¶
- âœ… **æ–°å¢ã€Œåˆ†äº«ã€ã€Œèˆ‰å ±ã€ç­‰åŠŸèƒ½å®¹æ˜“** - çµ±ä¸€çš„æ¶æ§‹æ¨¡å¼
- âœ… **å¤šèªè¨€æ”¯æ´å®¹æ˜“** - çµ±ä¸€çš„æ–‡æ¡ˆç®¡ç†

---

## é¢¨éšªè©•ä¼°

### é«˜é¢¨éšªé …ç›®

1. **é·ç§»æœŸé–“çš„å›æ­¸ bug**
   - **ç·©è§£**: å……åˆ†æ¸¬è©¦ + æ¼¸é€²å¼é·ç§»
   - **å›æ»¾è¨ˆç•«**: ä¿ç•™èˆŠçµ„ä»¶è‡³ç¢ºèªç©©å®š

2. **TanStack Query å¿«å–å•é¡Œ**
   - **ç·©è§£**: ä»”ç´°è¨­è¨ˆ queryKey å’Œ invalidation ç­–ç•¥
   - **ç›£æ§**: éƒ¨ç½²å¾Œå¯†åˆ‡ç›£æ§éŒ¯èª¤æ—¥èªŒ

3. **æ•ˆèƒ½å½±éŸ¿ (éåº¦å¿«å–)**
   - **ç·©è§£**: åˆç†çš„ staleTime è¨­å®š
   - **æ¸¬è©¦**: æ•ˆèƒ½æ¸¬è©¦,ç¢ºä¿ä¸å½±éŸ¿è¼‰å…¥é€Ÿåº¦

### ä¸­é¢¨éšªé …ç›®

1. **API ä¸ä¸€è‡´å°è‡´çš„å•é¡Œ**
   - **ç·©è§£**: service æ˜ å°„å±¤çµ±ä¸€è™•ç†
   - **æ¸¬è©¦**: æ¯å€‹ entityType éƒ½éœ€è¦æ¸¬è©¦

2. **UI æ¨¡å¼è®Šæ›´çš„ç”¨æˆ¶é©æ‡‰**
   - **ç·©è§£**: é·ç§»æ™‚ä¿æŒåŸæœ‰ UI æ¨¡å¼
   - **æºé€š**: å¦‚æœ‰ UI è®Šæ›´,æå‰é€šçŸ¥ç”¨æˆ¶

---

## æˆåŠŸæŒ‡æ¨™

| æŒ‡æ¨™             | ç›®æ¨™               | æ¸¬é‡æ–¹å¼                    | åŸºæº–å€¼ (ç•¶å‰)        |
| ---------------- | ------------------ | --------------------------- | -------------------- |
| **ä»£ç¢¼æ¸›å°‘**     | > 700 è¡Œ           | åˆªé™¤èˆŠçµ„ä»¶å¾Œçš„ LOC å°æ¯”     | 1559 è¡Œ              |
| **æ¸¬è©¦è¦†è“‹ç‡**   | > 80%              | Jest coverage report        | ~40% (åˆ†æ•£åœ¨å„çµ„ä»¶)  |
| **å›æ­¸ bug**     | < 5 å€‹             | é·ç§»æœŸé–“çš„ bug tracker      | N/A                  |
| **API è«‹æ±‚æ¸›å°‘** | > 30%              | Cloudflare Analytics        | 100%                 |
| **äº’å‹•é€Ÿåº¦**     | æ¨‚è§€æ›´æ–° < 50ms    | Chrome DevTools Performance | 200-500ms (ç­‰å¾… API) |
| **ç”¨æˆ¶æ»¿æ„åº¦**   | ç„¡è² é¢å›é¥‹         | ç”¨æˆ¶åé¥‹æ”¶é›†                | N/A                  |
| **çµ„ä»¶æ•¸é‡**     | å¾ 7 å€‹æ¸›å°‘åˆ° 3 å€‹ | æª”æ¡ˆæ¸…å–®å°æ¯”                | 7 å€‹çµ„ä»¶æª”æ¡ˆ         |

### è©³ç´°æŒ‡æ¨™

#### ä»£ç¢¼è³ªé‡æŒ‡æ¨™

- [ ] åˆªé™¤ 4 å€‹é‡è¤‡çš„ç•™è¨€çµ„ä»¶ (1142 è¡Œç¸½è¨ˆ)
- [ ] åˆªé™¤ 3 å€‹é‡è¤‡çš„æŒ‰è®šçµ„ä»¶ (417 è¡Œç¸½è¨ˆ)
- [ ] æ·¨æ¸›å°‘ > 700 è¡Œä»£ç¢¼
- [ ] å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ > 80%
- [ ] E2E æ¸¬è©¦é€šéç‡ 100%
- [ ] ç„¡ TypeScript éŒ¯èª¤
- [ ] ç„¡ ESLint è­¦å‘Š

#### æ•ˆèƒ½æŒ‡æ¨™

- [ ] æŒ‰è®šæ“ä½œå»¶é² < 50ms (æ¨‚è§€æ›´æ–°)
- [ ] æ”¶è—æ“ä½œå»¶é² < 50ms (æ¨‚è§€æ›´æ–°)
- [ ] ç•™è¨€è¼‰å…¥æ™‚é–“ < 200ms (å¿«å–å‘½ä¸­)
- [ ] API è«‹æ±‚æ¸›å°‘ > 30%
- [ ] é é¢è¼‰å…¥æ™‚é–“ä¸å¢åŠ 

#### åŠŸèƒ½æŒ‡æ¨™

- [ ] æ‰€æœ‰ç¾æœ‰äº’å‹•åŠŸèƒ½æ­£å¸¸é‹ä½œ
- [ ] æ”¶è—åŠŸèƒ½å¯æ“´å±•åˆ°æ‰€æœ‰æ”¯æ´çš„å…§å®¹é¡å‹
- [ ] æœªä¾†æ–°å¢ Gallery/Video/Gym/Crag/Route äº’å‹•åŠŸèƒ½ < 1 å¤©
- [ ] éŒ¯èª¤å›æ»¾æ©Ÿåˆ¶ 100% é‹ä½œ
- [ ] ç™»å…¥æª¢æŸ¥ 100% é‹ä½œ

#### ç”¨æˆ¶é«”é©—æŒ‡æ¨™

- [ ] äº’å‹•æŒ‰éˆ•è¦–è¦ºä¸€è‡´æ€§ 100%
- [ ] ç•™è¨€ UI ä¸€è‡´æ€§ 100%
- [ ] éŒ¯èª¤æç¤ºæ¸…æ™°æ˜“æ‡‚
- [ ] ç„¡è² é¢ç”¨æˆ¶å›é¥‹
- [ ] äº’å‹•æµæš¢åº¦è©•åˆ† > 4.5/5

#### ç¶­è­·æ€§æŒ‡æ¨™

- [ ] æ–°å¢äº’å‹•åŠŸèƒ½æ™‚é–“ < 1 å°æ™‚ (vs ç›®å‰ 1 å¤©)
- [ ] Bug ä¿®å¾©æ™‚é–“æ¸›å°‘ 75%
- [ ] Code review æ™‚é–“æ¸›å°‘ 50%
- [ ] æ–°é–‹ç™¼è€…ä¸Šæ‰‹æ™‚é–“æ¸›å°‘ 60%

---

## ç›¸é—œæ–‡ä»¶

- [Chapter äº’å‹•åŠŸèƒ½ä¸€è‡´æ€§ä¿®å¾©](../plans/) - éšæ®µæ€§ä¿®å¾© (å·²å®Œæˆ)
- [äººç‰©èªŒè¨­è¨ˆè¦ç¯„](./biography-interaction-guidelines.md) - å¾…å»ºç«‹
- [TanStack Query æœ€ä½³å¯¦è¸](./tanstack-query-best-practices.md) - å¾…å»ºç«‹

---

## å¿«é€Ÿåƒè€ƒ: ç•¶å‰äº’å‹•ç³»çµ±å°æ¯”

### å…§å®¹é¡å‹å¯¦ä½œå°æ¯”è¡¨

| å…§å®¹é¡å‹ | ç•¶å‰å¯¦ä½œ                                      | æ–‡ä»¶è·¯å¾‘                                                                    | ç¨‹å¼ç¢¼è¡Œæ•¸ | çµ±ä¸€å¾Œ   | æ¸›å°‘    |
| -------- | --------------------------------------------- | --------------------------------------------------------------------------- | ---------- | -------- | ------- |
| æ–‡ç«      | å…§è¯ + blog/CommentSection                    | `app/blog/[id]/BlogDetailClient.tsx` + `components/blog/CommentSection.tsx` | 330 è¡Œ     | 3 è¡Œ JSX | -327 è¡Œ |
| äººç‰©èªŒ   | BiographyLikeButton + BiographyCommentSection | `components/biography/biography-*.tsx`                                      | 478 è¡Œ     | 2 è¡Œ JSX | -476 è¡Œ |
| æ ¸å¿ƒæ•…äº‹ | ContentLikeButton + ContentCommentSheet       | `components/biography/display/Content*.tsx`                                 | 398 è¡Œ     | 2 è¡Œ JSX | -396 è¡Œ |
| å°æ•…äº‹   | ContentLikeButton + ContentCommentSheet       | åŒä¸Š                                                                        | -          | 2 è¡Œ JSX | -       |
| ä¸€å¥è©±   | ContentLikeButton + ContentCommentSheet       | åŒä¸Š                                                                        | -          | 2 è¡Œ JSX | -       |
| äººç”Ÿæ¸…å–® | LikeButton + CommentSection                   | `components/biography/like-button.tsx` + `comment-section.tsx`              | 353 è¡Œ     | 2 è¡Œ JSX | -351 è¡Œ |

**ç¸½è¨ˆ**: 1559 è¡Œ â†’ 770 è¡Œ (çµ±ä¸€çµ„ä»¶) = **æ¸›å°‘ 789 è¡Œ (51%)**

### åŠŸèƒ½ç‰¹æ€§å°æ¯”è¡¨

| åŠŸèƒ½ç‰¹æ€§     | ç³»çµ±1<br>äººç‰©èªŒ | ç³»çµ±2<br>ç« ç¯€  | ç³»çµ±3<br>æ¸…å–® | ç³»çµ±4<br>æ–‡ç«  | çµ±ä¸€å¾Œ          |
| ------------ | --------------- | -------------- | ------------- | ------------- | --------------- |
| **æŒ‰è®šåŠŸèƒ½** | âœ…              | âœ…             | âœ…            | âœ…            | âœ…              |
| **æ”¶è—åŠŸèƒ½** | âŒ              | âŒ             | âŒ            | âœ…            | âœ… å…¨éƒ¨         |
| **ç•™è¨€åŠŸèƒ½** | âœ…              | âœ…             | âœ…            | âœ…            | âœ…              |
| **æ¨‚è§€æ›´æ–°** | âŒ              | âœ…             | âŒ            | âŒ            | âœ… å…¨éƒ¨         |
| **éŒ¯èª¤å›æ»¾** | âŒ              | âœ…             | âŒ            | âŒ            | âœ… å…¨éƒ¨         |
| **å¿«å–æ©Ÿåˆ¶** | âŒ              | âœ… (5min)      | âŒ            | âŒ            | âœ… å…¨éƒ¨ (5min)  |
| **ç‹€æ…‹ç®¡ç†** | useState        | TanStack Query | useState      | useState      | TanStack Query  |
| **æŒ‰è®šåœ–æ¨™** | Mountain âœ…     | Heart âŒ       | Mountain âœ…   | Mountain âœ…   | Mountain (çµ±ä¸€) |
| **æŒ‰è®šé¡è‰²** | ç¶ è‰² âœ…         | ç´…è‰² âŒ        | ç´…è‰² âŒ       | ç¶ è‰² âœ…       | Emerald (çµ±ä¸€)  |
| **ç•™è¨€æ¨¡å¼** | æµ®å±¤            | Sheet          | å±•é–‹          | å±•é–‹          | å¯é…ç½®          |
| **å…ƒä»¶å°è£** | âœ…              | âœ…             | âœ…            | âŒ            | âœ…              |
| **å¯é‡ç”¨æ€§** | âŒ              | âŒ             | âŒ            | âŒ            | âœ…              |
| **æ¸¬è©¦è¦†è“‹** | ~30%            | ~50%           | ~30%          | ~20%          | > 80%           |

**æ”¹é€²é»**:

- âœ… æ‰€æœ‰å…§å®¹é¡å‹éƒ½æ”¯æ´æ”¶è— (ç›®å‰åªæœ‰æ–‡ç« )
- âœ… æ‰€æœ‰äº’å‹•éƒ½æœ‰æ¨‚è§€æ›´æ–° (ç›®å‰åªæœ‰éƒ¨åˆ†ç« ç¯€)
- âœ… æ‰€æœ‰äº’å‹•éƒ½æœ‰å¿«å– (ç›®å‰åªæœ‰ç« ç¯€)
- âœ… çµ±ä¸€çš„åœ–æ¨™å’Œé¡è‰²é…ç½®
- âœ… å¯é…ç½®çš„ UI æ¨¡å¼
- âœ… æ›´é«˜çš„æ¸¬è©¦è¦†è“‹ç‡

### é–‹ç™¼é«”é©—å°æ¯”

| é–‹ç™¼ä»»å‹™                 | é‡æ§‹å‰                        | é‡æ§‹å¾Œ                                       | æå‡     |
| ------------------------ | ----------------------------- | -------------------------------------------- | -------- |
| **æ–°å¢äº’å‹•åˆ°æ–°å…§å®¹é¡å‹** | é‡å¯« 400 è¡Œ + æ¸¬è©¦            | `<UnifiedLikeButton entityType="gallery" />` | 100å€ â¬†ï¸ |
| **æ·»åŠ æ”¶è—åˆ°äººç‰©èªŒ**     | è¤‡è£½æ–‡ç« ä»£ç¢¼ 80 è¡Œ + ä¿®æ”¹ API | `<UnifiedBookmarkButton />`                  | 10å€ â¬†ï¸  |
| **ä¿®æ”¹æŒ‰è®šé‚è¼¯**         | ä¿®æ”¹ 4 å€‹æª”æ¡ˆ                 | ä¿®æ”¹ 1 å€‹æª”æ¡ˆ                                | 4å€ â¬†ï¸   |
| **ä¿®æ”¹ç•™è¨€ UI**          | ä¿®æ”¹ 4 å€‹æª”æ¡ˆ                 | ä¿®æ”¹ 1 å€‹æª”æ¡ˆ                                | 4å€ â¬†ï¸   |
| **æ·»åŠ æ¨‚è§€æ›´æ–°**         | ä¿®æ”¹ 4 è™•å¯¦ä½œ                 | å·²å…§å»º,ç„¡éœ€ä¿®æ”¹                              | âˆ â¬†ï¸     |
| **Bug ä¿®å¾©**             | æ¸¬è©¦ 4 ç¨®å¯¦ä½œ                 | æ¸¬è©¦ 1 ç¨®å¯¦ä½œ                                | 4å€ â¬†ï¸   |
| **å–®å…ƒæ¸¬è©¦**             | å¯« 4 å¥—æ¸¬è©¦                   | å¯« 1 å¥—æ¸¬è©¦                                  | 4å€ â¬†ï¸   |
| **Code Review**          | æª¢æŸ¥ 4 ç¨®æ¨¡å¼                 | æª¢æŸ¥ 1 ç¨®æ¨¡å¼                                | 4å€ â¬†ï¸   |

### è¦–è¦ºåŒ–å°æ¯”

#### ç•¶å‰ç³»çµ±è¤‡é›œåº¦

```
ç³»çµ±1 (478è¡Œ) â”€â”
ç³»çµ±2 (398è¡Œ) â”€â”¼â”€â†’ 4å¥—ç¨ç«‹å¯¦ä½œ â†’ ç¶­è­·å™©å¤¢
ç³»çµ±3 (353è¡Œ) â”€â”¤
ç³»çµ±4 (330è¡Œ) â”€â”˜

é‡è¤‡ä»£ç¢¼: 1000+ è¡Œ
åŠŸèƒ½ä¸ä¸€è‡´: 4 ç¨®æ¨¡å¼
æ¸¬è©¦æˆæœ¬: 4 å€
Bug é¢¨éšª: 4 å€
```

#### çµ±ä¸€å¾Œç°¡æ½”åº¦

```
UnifiedLikeButton (150è¡Œ) â”€â”€â”
UnifiedBookmarkButton (120è¡Œ) â”¼â”€â†’ çµ±ä¸€çµ„ä»¶ â†’ æ˜“ç¶­è­·
UnifiedCommentSection (300è¡Œ) â”¤
Hooks & Utils (200è¡Œ) â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä»£ç¢¼é‡: 770 è¡Œ (-51%)
åŠŸèƒ½ä¸€è‡´: å–®ä¸€æ¨¡å¼
æ¸¬è©¦æˆæœ¬: 1å€
Bug é¢¨éšª: ä½
```

---

## ç¸½çµ

### ç‚ºä»€éº¼é€™æ˜¯é«˜å„ªå…ˆç´šæŠ€è¡“å‚µ?

1. **ä»£ç¢¼é‡è¤‡åš´é‡**: 1000+ è¡Œé‡è¤‡æˆ–é«˜åº¦ç›¸ä¼¼çš„ä»£ç¢¼
2. **ç¶­è­·æˆæœ¬é«˜**: ä¿®æ”¹åŠŸèƒ½éœ€åŒæ­¥ 4 è™•
3. **ç”¨æˆ¶é«”é©—ä¸ä¸€è‡´**: 4 ç¨®ä¸åŒçš„å¯¦ä½œæ–¹å¼
4. **é˜»ç¤™æœªä¾†æ“´å±•**: æ–°å¢åŠŸèƒ½éœ€é‡è¤‡é–‹ç™¼
5. **è³‡æ–™åº«è¨­è¨ˆè¢«æµªè²»**: è³‡æ–™åº«çµ±ä¸€è¨­è¨ˆ,å‰ç«¯åˆ†æ•£å¯¦ä½œ

### é‡æ§‹çš„ç·Šè¿«æ€§

- **ç•¶å‰ç‹€æ…‹**: æŠ€è¡“å‚µå‹™æŒçºŒç´¯ç©
- **é¢¨éšª**: æ¯æ¬¡æ–°å¢åŠŸèƒ½éƒ½åŠ é‡å•é¡Œ
- **æ©Ÿæœƒ**: è³‡æ–™åº«å·²çµ±ä¸€,åªéœ€çµ±ä¸€å‰ç«¯
- **å›å ±**: é«˜ - ä¸€æ¬¡é‡æ§‹,é•·æœŸå—ç›Š

### å»ºè­°æ™‚ç¨‹

**æ¨è–¦**: **Q1 2026 (1-3æœˆ)** é–‹å§‹é‡æ§‹

**ç†ç”±**:

1. åœ¨æ–°åŠŸèƒ½é–‹ç™¼å‰å®Œæˆ,é¿å…æ›´å¤šé‡è¤‡ä»£ç¢¼
2. ç‚º Gallery/Video/Gym/Crag åŠŸèƒ½æ“´å±•å¥ å®šåŸºç¤
3. æå‡åœ˜éšŠé–‹ç™¼æ•ˆç‡
4. æ”¹å–„ç”¨æˆ¶é«”é©—ä¸€è‡´æ€§

### ä¸‹ä¸€æ­¥

- [ ] èˆ‡åœ˜éšŠè¨è«–ä¸¦ç¢ºèªé‡æ§‹è¨ˆç•«
- [ ] å®‰æ’ 5-6 é€±çš„é–‹ç™¼æ™‚é–“
- [ ] æŒ‡å®šè² è²¬äººå’Œåœ˜éšŠæˆå“¡
- [ ] å‰µå»ºå°ˆæ¡ˆè¿½è¹¤ (GitHub Project æˆ– Jira)
- [ ] é–‹å§‹ç¬¬ 1 é€±: åŸºç¤å»ºè¨­

---

## ç‰ˆæœ¬æ­·å²

| æ—¥æœŸ       | ç‰ˆæœ¬ | è®Šæ›´å…§å®¹                              | ä½œè€…   |
| ---------- | ---- | ------------------------------------- | ------ |
| 2026-01-23 | v1.0 | åˆå§‹ç‰ˆæœ¬,åˆ†æä¸‰å¥—ç³»çµ±                 | Claude |
| 2026-01-23 | v2.0 | æ›´æ–°ç‚ºå››å¥—ç³»çµ±,åŠ å…¥æ–‡ç« å’Œæ”¶è—åŠŸèƒ½åˆ†æ | Claude |

---

## é™„éŒ„: æ±ºç­–è¨˜éŒ„

### ç‚ºä½•é¸æ“‡ TanStack Query?

1. **å·²æœ‰å…ˆä¾‹**: Chapters å·²æˆåŠŸä½¿ç”¨
2. **è‡ªå‹•å¿«å–**: æ¸›å°‘é‡è¤‡è«‹æ±‚
3. **æ¨‚è§€æ›´æ–°**: æ›´å¥½çš„ UX
4. **ç¤¾ç¾¤æ”¯æ´**: React ç”Ÿæ…‹æœ€æµè¡Œçš„è³‡æ–™ç²å–åº«

### ç‚ºä½•ä¿ç•™é è¨­é…ç½®?

å…è¨±çµ„ä»¶æ ¹æ“š `entityType` è‡ªå‹•é¸æ“‡åœ–æ¨™å’Œé¡è‰²,æ¸›å°‘é‡è¤‡é…ç½®:

```typescript
// ç°¡æ½”ç”¨æ³•
<UnifiedLikeButton entityType="biography" entityId={id} />

// ç­‰åŒæ–¼
<UnifiedLikeButton
  entityType="biography"
  entityId={id}
  iconType="mountain"
  colorScheme="emerald"
/>
```

### ç‚ºä½•ä¸ä¸€æ¬¡æ€§çµ±ä¸€?

æ¼¸é€²å¼é·ç§»çš„å„ªå‹¢:

- é™ä½é¢¨éšª
- åŠæ—©ç™¼ç¾å•é¡Œ
- ä¿ç•™å›æ»¾é¸é …
- ä¸å½±éŸ¿ç¾æœ‰åŠŸèƒ½
